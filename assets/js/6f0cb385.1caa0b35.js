"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1548],{3571:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=n(4848),t=n(8453);const i={},d=void 0,o={id:"contracts/hash-consensus",title:"hash-consensus",description:"\xbfQu\xe9 es HashConsensus?",source:"@site/docs/contracts/hash-consensus.md",sourceDirName:"contracts",slug:"/contracts/hash-consensus",permalink:"/contracts/hash-consensus",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/contracts/hash-consensus.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"ValidatorsExitBusOracle",permalink:"/contracts/validators-exit-bus-oracle"},next:{title:"LegacyOracle",permalink:"/contracts/legacy-oracle"}},l={},c=[{value:"\xbfQu\xe9 es HashConsensus?",id:"qu\xe9-es-hashconsensus",level:2},{value:"Procesador de informes (<code>IReportAsyncProcessor</code>)",id:"procesador-de-informes-ireportasyncprocessor",level:2},{value:"Fast-lane members",id:"fast-lane-members",level:3},{value:"M\xe9todos de visualizaci\xf3n",id:"m\xe9todos-de-visualizaci\xf3n",level:3},{value:"getChainConfig()",id:"getchainconfig",level:4},{value:"Retornos",id:"retornos",level:5},{value:"getFrameConfig()",id:"getframeconfig",level:4},{value:"Retornos",id:"retornos-1",level:5},{value:"getCurrentFrame()",id:"getcurrentframe",level:4},{value:"Returns",id:"returns",level:4},{value:"getInitialRefSlot()",id:"getinitialrefslot",level:3},{value:"getIsMember()",id:"getismember",level:3},{value:"getIsFastLaneMember()",id:"getisfastlanemember",level:3},{value:"getMembers()",id:"getmembers",level:3},{value:"getFastLaneMembers()",id:"getfastlanemembers",level:3},{value:"getQuorum()",id:"getquorum",level:3},{value:"getReportProcessor()",id:"getreportprocessor",level:3},{value:"getConsensusState()",id:"getconsensusstate",level:3},{value:"Returns",id:"returns-1",level:4},{value:"getReportVariants()",id:"getreportvariants",level:3},{value:"getConsensusStateForMember()",id:"getconsensusstateformember",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Methods",id:"methods",level:2},{value:"updateInitialEpoch()",id:"updateinitialepoch",level:3},{value:"setFrameConfig()",id:"setframeconfig",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"setFastLaneLengthSlots()",id:"setfastlanelengthslots",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"addMember()",id:"addmember",level:3},{value:"removeMember()",id:"removemember",level:3},{value:"setQuorum()",id:"setquorum",level:3},{value:"disableConsensus()",id:"disableconsensus",level:3},{value:"setReportProcessor()",id:"setreportprocessor",level:3},{value:"submitReport()",id:"submitreport",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Reverts",id:"reverts",level:4},{value:"Events",id:"events",level:2},{value:"FrameConfigSet()",id:"frameconfigset",level:3},{value:"FastLaneConfigSet()",id:"fastlaneconfigset",level:3},{value:"MemberAdded()",id:"memberadded",level:3},{value:"MemberRemoved()",id:"memberremoved",level:3},{value:"QuorumSet()",id:"quorumset",level:3},{value:"ReportReceived()",id:"reportreceived",level:3},{value:"ConsensusReached()",id:"consensusreached",level:3},{value:"ConsensusLost()",id:"consensuslost",level:3},{value:"ReportProcessorSet()",id:"reportprocessorset",level:3}];function a(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"qu\xe9-es-hashconsensus",children:"\xbfQu\xe9 es HashConsensus?"}),"\n",(0,r.jsx)(s.p,{children:"HashConsensus es un contrato responsable de gestionar el comit\xe9 de miembros del or\xe1culo y permitir que los miembros alcancen un consenso sobre un hash de datos para cada marco de informes."}),"\n",(0,r.jsx)(s.p,{children:"El tiempo se divide en marcos de igual longitud, cada uno con una ranura de referencia y una fecha l\xedmite de procesamiento. Los datos del informe deben recopilarse observando el estado del mundo (tanto en las capas de consenso como de ejecuci\xf3n de Ethereum) en el momento de la ranura de referencia del marco (incluidos los cambios de estado realizados en esa ranura) y deben procesarse antes de la fecha l\xedmite de procesamiento del marco."}),"\n",(0,r.jsxs)(s.h2,{id:"procesador-de-informes-ireportasyncprocessor",children:["Procesador de informes (",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor"}),")"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"IReportAsyncProcessor"})," define la interfaz para un contrato que recibe informes de consenso (es decir, hashes) y los procesa de manera asincr\xf3nica. ",(0,r.jsx)(s.code,{children:"HashConsensus"})," no espera un comportamiento espec\xedfico de un procesador de informes y garantiza lo siguiente:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"HashConsensus"})," no enviar\xe1 informes a trav\xe9s de ",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor.submitConsensusReport"})," ni pedir\xe1 descartar informes a trav\xe9s de ",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor.discardConsensusReport"})," para cualquier ranura hasta (e incluyendo) la ranura devuelta por ",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor.getLastProcessingRefSlot"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"HashConsensus"})," no aceptar\xe1 informes de miembros (y, por lo tanto, no los incluir\xe1 en el c\xe1lculo del consenso) que tengan el argumento ",(0,r.jsx)(s.code,{children:"consensusVersion"})," de la llamada ",(0,r.jsx)(s.code,{children:"HashConsensus.submitReport"})," con un valor diferente al devuelto por ",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor.getConsensusVersion"})," en el momento de la llamada ",(0,r.jsx)(s.code,{children:"HashConsensus.submitReport"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"fast-lane-members",children:"Fast-lane members"}),"\n",(0,r.jsxs)(s.p,{children:['Los miembros de Fast-lane son un subconjunto de todos los miembros que cambia en cada marco de informes. Estos miembros pueden, y se espera que, env\xeden un informe durante la primera parte del marco llamada "intervalo de fast lane" y definida a trav\xe9s de ',(0,r.jsx)(s.code,{children:"setFrameConfig"})," o ",(0,r.jsx)(s.code,{children:"setFastLaneLengthSlots"}),". El c\xe1lculo del subconjunto de miembros de Fast-lane depende de ",(0,r.jsx)(s.code,{children:"frameIndex"}),", ",(0,r.jsx)(s.code,{children:"totalMembers"})," y ",(0,r.jsx)(s.code,{children:"quorum"}),". En circunstancias normales, todos los dem\xe1s miembros solo pueden enviar un informe despu\xe9s de que pase el intervalo de fast lane. Esto se hace para alentar a cada or\xe1culo del conjunto completo a participar en los informes de manera regular e identificar a los miembros que no funcionan correctamente."]}),"\n",(0,r.jsxs)(s.p,{children:["El subconjunto de fast lane consiste en miembros del qu\xf3rum; la selecci\xf3n se implementa como una ventana deslizante del ancho del qu\xf3rum sobre los \xedndices de miembros (",(0,r.jsx)(s.code,{children:"mod"})," total de miembros). La ventana avanza un \xedndice en cada marco de informes."]}),"\n",(0,r.jsx)(s.p,{children:"Con el mecanismo de fast lane activo, es suficiente para la supervisi\xf3n verificar que se alcanza consistentemente el consenso durante la parte de fast lane de cada marco para concluir que todos los miembros est\xe1n activos y comparten las mismas reglas de consenso."}),"\n",(0,r.jsx)(s.h3,{id:"m\xe9todos-de-visualizaci\xf3n",children:"M\xe9todos de visualizaci\xf3n"}),"\n",(0,r.jsx)(s.h4,{id:"getchainconfig",children:"getChainConfig()"}),"\n",(0,r.jsx)(s.p,{children:"Devuelve los par\xe1metros de cadena inmutables necesarios para calcular la \xe9poca y la ranura dada una marca de tiempo."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getChainConfig() external view returns (\n    uint256 slotsPerEpoch,\n    uint256 secondsPerSlot,\n    uint256 genesisTime\n)\n"})}),"\n",(0,r.jsx)(s.h5,{id:"retornos",children:"Retornos"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Nombre"}),(0,r.jsx)(s.th,{children:"Tipo"}),(0,r.jsx)(s.th,{children:"Descripci\xf3n"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"slotsPerEpoch"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsxs)(s.td,{children:["N\xfamero de ranuras por \xe9poca, ",(0,r.jsx)(s.code,{children:"32"})," por defecto"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"secondsPerSlot"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsxs)(s.td,{children:["El tiempo asignado para cada ranura, ",(0,r.jsx)(s.code,{children:"12"})," por defecto"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"genesisTime"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsxs)(s.td,{children:["Hora de g\xe9nesis de la capa de consenso, ",(0,r.jsx)(s.code,{children:"1606824023"})," en ",(0,r.jsx)(s.a,{href:"https://blog.ethereum.org/2020/11/27/eth2-quick-update-no-21",children:"Mainnet"})]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"getframeconfig",children:"getFrameConfig()"}),"\n",(0,r.jsx)(s.p,{children:"Devuelve la configuraci\xf3n relacionada con el tiempo."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getFrameConfig() external view returns (\n    uint256 initialEpoch,\n    uint256 epochsPerFrame,\n    uint256 fastLaneLengthSlots\n)\n"})}),"\n",(0,r.jsx)(s.h5,{id:"retornos-1",children:"Retornos"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Nombre"}),(0,r.jsx)(s.th,{children:"Tipo"}),(0,r.jsx)(s.th,{children:"Descripci\xf3n"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"initialEpoch"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"\xc9poca del marco con \xedndice cero"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"epochsPerFrame"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"Longitud de un marco en \xe9pocas"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsxs)(s.td,{children:["Longitud del intervalo de fast lane en ranuras; ver ",(0,r.jsx)(s.code,{children:"getIsFastLaneMember"})]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"getcurrentframe",children:"getCurrentFrame()"}),"\n",(0,r.jsx)(s.p,{children:"Devuelve el marco de informes actual."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getCurrentFrame() external view returns (\n    uint256 refSlot,\n    uint256 reportProcessingDeadlineSlot\n)\n"})}),"\n",(0,r.jsx)(s.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"refSlot"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"The frame's reference slot: if the data the consensus is being reached upon includes or depends on any onchain state, this state should be queried at the reference slot. If the slot contains a block, the state should include all changes from that block."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"reportProcessingDeadlineSlot"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"The last slot at which the report can be processed by the report processor contract."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"getinitialrefslot",children:"getInitialRefSlot()"}),"\n",(0,r.jsx)(s.p,{children:"Returns the earliest possible reference slot, i.e. the reference slot of the reporting frame with zero index."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getInitialRefSlot() external view returns (uint256)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getismember",children:"getIsMember()"}),"\n",(0,r.jsx)(s.p,{children:"Returns whether the given address is currently a member of the consensus."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getIsMember(address addr) external view returns (bool)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getisfastlanemember",children:"getIsFastLaneMember()"}),"\n",(0,r.jsx)(s.p,{children:"Returns whether the given address is a fast lane member for the current reporting frame."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getIsFastLaneMember(address addr) external view returns (bool)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getmembers",children:"getMembers()"}),"\n",(0,r.jsx)(s.p,{children:"Returns all current members, together with the last reference slot each member submitted a report for."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getMembers() external view returns (\n    address[] memory addresses,\n    uint256[] memory lastReportedRefSlots\n)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getfastlanemembers",children:"getFastLaneMembers()"}),"\n",(0,r.jsxs)(s.p,{children:["Returns the subset of the oracle committee members (consisting of ",(0,r.jsx)(s.code,{children:"quorum"})," items) that changes each frame."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getFastLaneMembers() external view returns (\n    address[] memory addresses,\n    uint256[] memory lastReportedRefSlots\n)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getquorum",children:"getQuorum()"}),"\n",(0,r.jsx)(s.p,{children:"Returns quorum number"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getQuorum() external view returns (uint256)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getreportprocessor",children:"getReportProcessor()"}),"\n",(0,r.jsx)(s.p,{children:"Returns report processor address, i.e oracle address"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getReportProcessor() external view returns (address)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getconsensusstate",children:"getConsensusState()"}),"\n",(0,r.jsx)(s.p,{children:"Returns info about the current frame and consensus state in that frame."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getConsensusState() external view returns (\n    uint256 refSlot,\n    bytes32 consensusReport,\n    bool isReportProcessing\n)\n"})}),"\n",(0,r.jsx)(s.h4,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsx)(s.p,{children:"Returns info about the current frame and consensus state in that frame."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"refSlot"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"Reference slot of the current reporting frame."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"consensusReport"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bytes32"})}),(0,r.jsx)(s.td,{children:"Consensus report for the current frame, if any. Zero bytes otherwise."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"isReportProcessing"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsx)(s.td,{children:"If consensus report for the current frame is already being processed. Consensus can be changed before the processing starts."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"getreportvariants",children:"getReportVariants()"}),"\n",(0,r.jsx)(s.p,{children:"Returns report variants and their support for the current reference slot."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getReportVariants() external view returns (\n    bytes32[] memory variants,\n    uint256[] memory support\n)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getconsensusstateformember",children:"getConsensusStateForMember()"}),"\n",(0,r.jsx)(s.p,{children:"Returns the extended information related to an oracle committee member with the\ngiven address and the current consensus state. Provides all the information needed for\nan oracle daemon to decide if it needs to submit a report."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function getConsensusStateForMember(address addr) external view returns (MemberConsensusState memory result)\n"})}),"\n",(0,r.jsx)(s.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"addr"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"address"})}),(0,r.jsx)(s.td,{children:"The member address."})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"returns-2",children:"Returns"}),"\n",(0,r.jsxs)(s.p,{children:["Returns a new type ",(0,r.jsx)(s.code,{children:"MemberConsensusState"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"struct MemberConsensusState {\n    /// @notice Current frame's reference slot.\n    uint256 currentFrameRefSlot;\n\n    /// @notice Consensus report for the current frame, if any. Zero bytes otherwise.\n    bytes32 currentFrameConsensusReport;\n\n    /// @notice Whether the provided address is a member of the oracle committee.\n    bool isMember;\n\n    /// @notice Whether the oracle committee member is in the fast lane members subset\n    /// of the current reporting frame. See `getIsFastLaneMember`.\n    bool isFastLane;\n\n    /// @notice Whether the oracle committee member is allowed to submit a report at\n    /// the moment of the call.\n    bool canReport;\n\n    /// @notice The last reference slot for which the member submitted a report.\n    uint256 lastMemberReportRefSlot;\n\n    /// @notice The hash reported by the member for the current frame, if any.\n    /// Zero bytes otherwise.\n    bytes32 currentFrameMemberReport;\n}\n"})}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"updateinitialepoch",children:"updateInitialEpoch()"}),"\n",(0,r.jsx)(s.p,{children:"Sets a new initial epoch given that the current initial epoch is in the future."}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"DEFAULT_ADMIN_ROLE"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function updateInitialEpoch(uint256 initialEpoch) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"InitialEpochAlreadyArrived()"})," if current epoch more or equal initial epoch from current frame config."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"InitialEpochRefSlotCannotBeEarlierThanProcessingSlot()"})," if initial frame refSlot less than last processing refSlot."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"EpochsPerFrameCannotBeZero()"})," if ",(0,r.jsx)(s.code,{children:"epochsPerFrame"})," from frame config is zero."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"FastLanePeriodCannotBeLongerThanFrame()"})," if ",(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})," from config more than frame length."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"setframeconfig",children:"setFrameConfig()"}),"\n",(0,r.jsx)(s.p,{children:"Updates the time-related configuration."}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_FRAME_CONFIG_ROLE"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function setFrameConfig(uint256 epochsPerFrame, uint256 fastLaneLengthSlots) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"EpochsPerFrameCannotBeZero()"})," if ",(0,r.jsx)(s.code,{children:"epochsPerFrame"})," is zero."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"FastLanePeriodCannotBeLongerThanFrame()"})," if ",(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})," more than frame length."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"epochsPerFrame"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"ALength of a frame in epochs."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsxs)(s.td,{children:["Length of the fast lane interval in slots; see ",(0,r.jsx)(s.code,{children:"getIsFastLaneMember"}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"setfastlanelengthslots",children:"setFastLaneLengthSlots()"}),"\n",(0,r.jsx)(s.p,{children:"Sets the duration of the fast lane interval of the reporting frame."}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_FAST_LANE_CONFIG_ROLE"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function setFastLaneLengthSlots(uint256 fastLaneLengthSlots) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"FastLanePeriodCannotBeLongerThanFrame()"})," if ",(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})," more than frame length."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"fastLaneLengthSlots"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"The length of the fast lane reporting interval in slots. Setting it to zero disables the fast lane subset, allowing any oracle to report starting from the first slot of a frame and until the frame's reporting deadline."})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"addmember",children:"addMember()"}),"\n",(0,r.jsx)(s.p,{children:"Add a new member of the consensus."}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"DISABLE_CONSENSUS_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," set as UINT256_MAX."]}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_MEMBERS_AND_QUORUM_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," not set as UINT256_MAX."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function addMember(address addr, uint256 quorum) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"DuplicateMember()"})," if ",(0,r.jsx)(s.code,{children:"addr"})," address is already the member of consensus."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"AddressCannotBeZero()"})," if ",(0,r.jsx)(s.code,{children:"addr"})," address is zero."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"QuorumTooSmall(uint256 minQuorum, uint256 receivedQuorum)"})," if ",(0,r.jsx)(s.code,{children:"quorum"})," less or equal than total members of consensus divided by 2  (",(0,r.jsx)(s.code,{children:"quorum <= total members / 2"}),")"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"removemember",children:"removeMember()"}),"\n",(0,r.jsx)(s.p,{children:"Remove a member from the consensus."}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"DISABLE_CONSENSUS_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," set as UINT256_MAX."]}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_MEMBERS_AND_QUORUM_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," not set as UINT256_MAX."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function removeMember(address addr, uint256 quorum) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"NonMember()"})," if ",(0,r.jsx)(s.code,{children:"addr"})," address doesn't exists"]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"QuorumTooSmall(uint256 minQuorum, uint256 receivedQuorum)"})," if ",(0,r.jsx)(s.code,{children:"quorum"})," less or equal than total members of consensus divided by 2  (",(0,r.jsx)(s.code,{children:"quorum <= total members / 2"}),")"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"setquorum",children:"setQuorum()"}),"\n",(0,r.jsx)(s.p,{children:"Update consensus quorum"}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"DISABLE_CONSENSUS_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," set as UINT256_MAX."]}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_MEMBERS_AND_QUORUM_ROLE"})," role if ",(0,r.jsx)(s.code,{children:"quorum"})," not set as UINT256_MAX."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function setQuorum(uint256 quorum) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"QuorumTooSmall(uint256 minQuorum, uint256 receivedQuorum)"})," if ",(0,r.jsx)(s.code,{children:"quorum"})," less or equal than total members of consensus divided by 2  (",(0,r.jsx)(s.code,{children:"quorum <= total members / 2"}),")"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"disableconsensus",children:"disableConsensus()"}),"\n",(0,r.jsxs)(s.p,{children:["Disable consensus quorum, i.e set quorum as ",(0,r.jsx)(s.code,{children:"UINT256_MAX"})," (UNREACHABLE_QUORUM)"]}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"DISABLE_CONSENSUS_ROLE"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function disableConsensus() external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"QuorumTooSmall(uint256 minQuorum, uint256 receivedQuorum)"})," if ",(0,r.jsx)(s.code,{children:"quorum"})," less or equal than total members of consensus divided by 2  (",(0,r.jsx)(s.code,{children:"quorum <= total members / 2"}),")"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"setreportprocessor",children:"setReportProcessor()"}),"\n",(0,r.jsx)(s.p,{children:"Set report processor address, i.e oracle address"}),"\n",(0,r.jsxs)(s.p,{children:["Can only be called by users with ",(0,r.jsx)(s.code,{children:"MANAGE_REPORT_PROCESSOR_ROLE"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function setReportProcessor(address newProcessor) external\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"ReportProcessorCannotBeZero()"})," if ",(0,r.jsx)(s.code,{children:"newProcessor"})," address is zero."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"NewProcessorCannotBeTheSame()"})," if ",(0,r.jsx)(s.code,{children:"newProcessor"})," address is equal to the previous processor address."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"submitreport",children:"submitReport()"}),"\n",(0,r.jsx)(s.p,{children:"Used by oracle members to submit hash of the data calculated for the given reference slot."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"function submitReport(uint256 slot, bytes32 report, uint256 consensusVersion) external\n"})}),"\n",(0,r.jsx)(s.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"slot"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"The reference slot the data was calculated for. Reverts if doesn't match the current reference slot."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"report"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bytes32"})}),(0,r.jsx)(s.td,{children:"Hash of the data calculated for the given reference slot."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"consensusVersion"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint256"})}),(0,r.jsx)(s.td,{children:"Version of the oracle consensus rules. Reverts if doesn't match the version returned by the currently set consensus report processor, or zero if no report processor is set."})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"reverts",children:"Reverts"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"InvalidSlot()"})," if ",(0,r.jsx)(s.code,{children:"slot"})," is zero."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"InvalidSlot()"})," if ",(0,r.jsx)(s.code,{children:"slot"})," is not equal current frame refSlot."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"NumericOverflow()"})," if ",(0,r.jsx)(s.code,{children:"slot"})," is more than ",(0,r.jsx)(s.code,{children:"UINT64_MAX"})]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"EmptyReport()"})," if ",(0,r.jsx)(s.code,{children:"reports"})," is zero hash (",(0,r.jsx)(s.code,{children:"bytes32(0)"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"NonMember()"})," if caller address doesn't exists in members array"]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"UnexpectedConsensusVersion(uint256 expected, uint256 received)"})," if ",(0,r.jsx)(s.code,{children:"consensusVersion"})," is not equal report processor consensus version."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"StaleReport()"})," if the current frame slot is more than the frame report processing deadline slot."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"NonFastLaneMemberCannotReportWithinFastLaneInterval()"})," if the current frame slot is less or equal frame ref slot plus fastlane length AND the member who submits the report is not fastlane member."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"ConsensusReportAlreadyProcessing()"})," if the member sends a report for the same slot."]}),"\n",(0,r.jsxs)(s.li,{children:["Reverts with ",(0,r.jsx)(s.code,{children:"DuplicateReport()"})," if the member already sends the report."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"events",children:"Events"}),"\n",(0,r.jsx)(s.h3,{id:"frameconfigset",children:"FrameConfigSet()"}),"\n",(0,r.jsxs)(s.p,{children:["Emits when a new frame config set via ",(0,r.jsx)(s.a,{href:"#setframeconfig",children:(0,r.jsx)(s.code,{children:"setFrameConfig"})}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event FrameConfigSet(uint256 newInitialEpoch, uint256 newEpochsPerFrame)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"fastlaneconfigset",children:"FastLaneConfigSet()"}),"\n",(0,r.jsx)(s.p,{children:"Emits when fast lane length changed (i.e., length defined in slots)."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event FastLaneConfigSet(uint256 fastLaneLengthSlots)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"memberadded",children:"MemberAdded()"}),"\n",(0,r.jsx)(s.p,{children:"Emits when a new member of consensus is added."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event MemberAdded(address indexed addr, uint256 newTotalMembers, uint256 newQuorum)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"memberremoved",children:"MemberRemoved()"}),"\n",(0,r.jsx)(s.p,{children:"Emits when an existing member of consensus is removed."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event MemberRemoved(address indexed addr, uint256 newTotalMembers, uint256 newQuorum)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"quorumset",children:"QuorumSet()"}),"\n",(0,r.jsx)(s.p,{children:"Emits when a quorum of consensus members is changed."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event QuorumSet(uint256 newQuorum, uint256 totalMembers, uint256 prevQuorum)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"reportreceived",children:"ReportReceived()"}),"\n",(0,r.jsxs)(s.p,{children:["Emits when a new report received for the provided ",(0,r.jsx)(s.code,{children:"refSlot"})," by ",(0,r.jsx)(s.code,{children:"member"})," containing the ",(0,r.jsx)(s.code,{children:"report"})," hash."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:" event ReportReceived(uint256 indexed refSlot, address indexed member, bytes32 report)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"consensusreached",children:"ConsensusReached()"}),"\n",(0,r.jsxs)(s.p,{children:["Emits when a consensus reached for the provided ",(0,r.jsx)(s.code,{children:"refSlot"})," containing the ",(0,r.jsx)(s.code,{children:"report"})," hash."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event ConsensusReached(uint256 indexed refSlot, bytes32 report, uint256 support)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"consensuslost",children:"ConsensusLost()"}),"\n",(0,r.jsxs)(s.p,{children:["Emits when the previously established consensus for the provided ",(0,r.jsx)(s.code,{children:"refSlot"})," is disbanded."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event ConsensusLost(uint256 indexed refSlot)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"reportprocessorset",children:"ReportProcessorSet()"}),"\n",(0,r.jsxs)(s.p,{children:["Emits when the report processor is changed from ",(0,r.jsx)(s.code,{children:"prevProcessor"})," to ",(0,r.jsx)(s.code,{children:"processor"}),".\nBoth addresses must comply with the ",(0,r.jsx)(s.code,{children:"IReportAsyncProcessor"})," interface."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-solidity",children:"event ReportProcessorSet(address indexed processor, address indexed prevProcessor)\n"})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>o});var r=n(6540);const t={},i=r.createContext(t);function d(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);