"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2234],{7567:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var r=i(4848),o=i(8453);const s={},n="Validator Exits",a={id:"staking-modules/csm/validator-exits",title:"Validator Exits",description:"exits-1",source:"@site/docs/staking-modules/csm/validator-exits.md",sourceDirName:"staking-modules/csm",slug:"/staking-modules/csm/validator-exits",permalink:"/staking-modules/csm/validator-exits",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/staking-modules/csm/validator-exits.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Penalizaciones",permalink:"/staking-modules/csm/penalties"},next:{title:"Further reading",permalink:"/staking-modules/csm/further-reading"}},l={},d=[{value:"Voluntary exits",id:"voluntary-exits",level:2},{value:"Protocol-initiated exits",id:"protocol-initiated-exits",level:2},{value:"Low performance for a long time",id:"low-performance-for-a-long-time",level:2},{value:"Withdrawal balance reporting",id:"withdrawal-balance-reporting",level:2},{value:"Useful links",id:"useful-links",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"validator-exits",children:"Validator Exits"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"exits-1",src:i(4166).A+"",width:"1805",height:"2070"})}),"\n",(0,r.jsx)(t.h2,{id:"voluntary-exits",children:"Voluntary exits"}),"\n",(0,r.jsx)(t.p,{children:"Given the permissionless nature of CSM, NOs can voluntarily exit their validators at any moment."}),"\n",(0,r.jsx)(t.h2,{id:"protocol-initiated-exits",children:"Protocol-initiated exits"}),"\n",(0,r.jsxs)(t.p,{children:["For consistency with the core protocol and other staking modules, CSM uses ",(0,r.jsx)(t.a,{href:"../../contracts/validators-exit-bus-oracle",children:"VEBO"})," to request or trigger exits (to be implemented after the Pectra hardfork bringing ",(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-7002",children:"EIP-7002"})," to life) for the validators."]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["Note: The actual implementation of the triggerable exits is not defined yet. There might be additional contracts to actually trigger exits on top of the ",(0,r.jsx)(t.a,{href:"../../contracts/validators-exit-bus-oracle",children:"VEBO"}),"."]})}),"\n",(0,r.jsx)(t.p,{children:"From the core protocol side, validator exit can be requested to cover withdrawal requests from stETH holders, or according to the decision of the DAO."}),"\n",(0,r.jsxs)(t.p,{children:["From CSM side, validator exits can be requested for unbonded validators. These exits are requested automatically using the ",(0,r.jsx)(t.code,{children:"forcedTargetLimit"}),"."]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"forcedTargetLimit"})," is currently under development within the updated version of ",(0,r.jsx)(t.a,{href:"https://hackmd.io/@lido/BJXRTxMRp#Forced-Exit-Requests1",children:"Staking Router"}),". In short, it is similar to the existing ",(0,r.jsx)(t.code,{children:"targetLimit"})," but exits for the validators above ",(0,r.jsx)(t.code,{children:"forcedTargetLimit"})," can be requested within the next ",(0,r.jsx)(t.a,{href:"../../contracts/validators-exit-bus-oracle",children:"VEBO"})," report, even without a need to fulfill withdrawal requests from stETH holders."]})}),"\n",(0,r.jsxs)(t.p,{children:["Node Operators should follow ",(0,r.jsx)(t.a,{href:"../../contracts/validators-exit-bus-oracle",children:"VEBO"})," events (for example, by using the ",(0,r.jsx)(t.a,{href:"https://github.com/lidofinance/validator-ejector",children:"Ejector"}),") to ensure they exit validators on time. The following penalties and limiting measures should be applied if the Node Operator refuses to exit validators after the protocol request:"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Exclude Node Operator's keys from the CSM deposit queue and do not put them back until ",(0,r.jsx)(t.code,{children:"stuckKeysCount = 0"}),";"]}),"\n",(0,r.jsxs)(t.li,{children:["Exclude the Node Operator from the staking rewards allocation cycle within the reporting period of the Performance Oracle if the Node Operator's ",(0,r.jsx)(t.code,{children:"stuckKeysCount"})," was > 0 during it;"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Also, in exceptional cases, Lido DAO can trigger exits for Node Operator's validators (to be implemented after the Pectra hardfork bringing ",(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-7002",children:"EIP-7002"})," to life)."]}),"\n",(0,r.jsx)(t.h2,{id:"low-performance-for-a-long-time",children:"Low performance for a long time"}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["This mechanics is to be implemented after the Pectra hardfork bringing ",(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-7002",children:"EIP-7002"})," to life."]})}),"\n",(0,r.jsx)(t.p,{children:'If a validator is performing below the Performance threshold for 3 frames within 6 frames, it is treated as a bad performer violating the rule of good performance within the protocol. Validators with 3 "strikes" (frames of low performance) can be requested for ejection from the protocol using a permissionless method. There is also an option to confiscate missed profits by such validators from the Node Operator\'s bond. However, this option is still under consideration.'}),"\n",(0,r.jsxs)(t.p,{children:["To learn more about bad-performers ejection please refer to the ",(0,r.jsx)(t.a,{href:"https://hackmd.io/@lido/Sy0nRd36a",children:"separate document"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"withdrawal-balance-reporting",children:"Withdrawal balance reporting"}),"\n",(0,r.jsxs)(t.p,{children:["The withdrawal balance of the validator is required to release the bond and calculate the exit penalty, if any. This balance is reported permissionlessly using ",(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-4788",children:"EIP-4788"})," by the CSM bot or the Node Operator themselves."]}),"\n",(0,r.jsx)(t.h2,{id:"useful-links",children:"Useful links"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-4788",children:"EIP-4788"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-7002",children:"EIP-7002"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-7600",children:"Pectra hardfork"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},4166:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/exits-1-4c812f9ba0aff5a66ffde3dfae011302.png"},8453:(e,t,i)=>{i.d(t,{R:()=>n,x:()=>a});var r=i(6540);const o={},s=r.createContext(o);function n(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);