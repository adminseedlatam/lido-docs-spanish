"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1180],{2497:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var t=d(4848),r=d(8453);const s={},i="NodeOperatorsRegistry",o={id:"contracts/node-operators-registry",title:"NodeOperatorsRegistry",description:"- Source Code",source:"@site/docs/contracts/node-operators-registry.md",sourceDirName:"contracts",slug:"/contracts/node-operators-registry",permalink:"/lido-docs-spanish/contracts/node-operators-registry",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/contracts/node-operators-registry.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"StakingRouter",permalink:"/lido-docs-spanish/contracts/staking-router"},next:{title:"WithdrawalQueueERC721",permalink:"/lido-docs-spanish/contracts/withdrawal-queue-erc721"}},l={},c=[{value:"Glossary",id:"glossary",level:2},{value:"Node operator parameters",id:"node-operator-parameters",level:2},{value:"View Methods",id:"view-methods",level:2},{value:"getRewardsDistribution()",id:"getrewardsdistribution",level:3},{value:"getActiveNodeOperatorsCount()",id:"getactivenodeoperatorscount",level:3},{value:"getNodeOperator()",id:"getnodeoperator",level:3},{value:"getTotalSigningKeyCount()",id:"gettotalsigningkeycount",level:3},{value:"getUnusedSigningKeyCount()",id:"getunusedsigningkeycount",level:3},{value:"getSigningKey()",id:"getsigningkey",level:3},{value:"getSigningKeys()",id:"getsigningkeys",level:3},{value:"getNodeOperatorsCount()",id:"getnodeoperatorscount",level:3},{value:"getNonce()",id:"getnonce",level:3},{value:"getType()",id:"gettype",level:3},{value:"getStakingModuleSummary()",id:"getstakingmodulesummary",level:3},{value:"getNodeOperatorIsActive()",id:"getnodeoperatorisactive",level:3},{value:"getNodeOperatorIds()",id:"getnodeoperatorids",level:3},{value:"getNodeOperatorSummary()",id:"getnodeoperatorsummary",level:3},{value:"getStuckPenaltyDelay()",id:"getstuckpenaltydelay",level:3},{value:"isOperatorPenalized()",id:"isoperatorpenalized",level:3},{value:"isOperatorPenaltyCleared()",id:"isoperatorpenaltycleared",level:3},{value:"getLocator()",id:"getlocator",level:3},{value:"Methods",id:"methods",level:2},{value:"addNodeOperator()",id:"addnodeoperator",level:3},{value:"activateNodeOperator()",id:"activatenodeoperator",level:3},{value:"deactivateNodeOperator()",id:"deactivatenodeoperator",level:3},{value:"setNodeOperatorName()",id:"setnodeoperatorname",level:3},{value:"setNodeOperatorRewardAddress()",id:"setnodeoperatorrewardaddress",level:3},{value:"setNodeOperatorStakingLimit()",id:"setnodeoperatorstakinglimit",level:3},{value:"addSigningKeys()",id:"addsigningkeys",level:3},{value:"removeSigningKeys()",id:"removesigningkeys",level:3},{value:"invalidateReadyToDepositKeysRange()",id:"invalidatereadytodepositkeysrange",level:3},{value:"clearNodeOperatorPenalty()",id:"clearnodeoperatorpenalty",level:3},{value:"setStuckPenaltyDelay()",id:"setstuckpenaltydelay",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"nodeoperatorsregistry",children:"NodeOperatorsRegistry"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/lidofinance/lido-dao/blob/master/contracts/0.4.24/nos/NodeOperatorsRegistry.sol",children:"Source Code"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://etherscan.io/address/0x55032650b14df07b85bF18A3a3eC8E0Af2e028d5",children:"Deployed Contract"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"NodeOperatorsRegistry"})," contract acts as a registry of Node Operators selected by the Lido DAO.\nSince ",(0,t.jsx)(n.a,{href:"https://blog.lido.fi/introducing-lido-v2/",children:"Lido V2 upgrade"})," ",(0,t.jsx)(n.code,{children:"NodeOperatorsRegistry"})," contract became a module of ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/staking-router",children:(0,t.jsx)(n.code,{children:"StakingRouter"})})," and got the second name ",(0,t.jsx)(n.strong,{children:"Curated staking module"})," as part of the general Lido staking infrastructure. As a staking module, ",(0,t.jsx)(n.code,{children:"NodeOperatorsRegistry"})," implements ",(0,t.jsx)(n.a,{href:"https://github.com/lidofinance/lido-dao/blob/master/contracts/0.8.9/interfaces/IStakingModule.sol",children:"StakingModule interface"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"NodeOperatorsRegistry"})," keeps track of various Node Operators data, in particular limits of the allowed stake, reward addresses, penalty information, public keys of the Node Operators' validators. It defines order in which the Node Operators get the ether deposited and reward distribution between the node operators."]}),"\n",(0,t.jsxs)(n.p,{children:["A curated node operator is obliged by the Lido DAO to exit its validators timely if requested by the Lido protocol. The exit request is formed on-chain by means of ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/validators-exit-bus-oracle",children:(0,t.jsx)(n.code,{children:"ValidatorsExitBusOracle"})})," contract. If a NO doesn't fulfil the request timely, it might get penalized. The penalized status is assigned automatically by the Lido protocol. The penalized NO do not get new ether for new deposits and also receives half of its rewards till the penalty is cleared. The other half of the NO rewards gets distributed between all stETH holders (technically, it gets burned). To get the penalty cleared, the NO must exit the stuck validators or refund the corresponding ether amount and wait ",(0,t.jsx)(n.code,{children:"getStuckPenaltyDelay()"})," seconds after that."]}),"\n",(0,t.jsx)(n.p,{children:"The Lido DAO can also:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["set target limit count as the number of validators for the NO. If the current active number of validators is below the value, the excess ones will be requested to exit in a prioritized manner when required to ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/withdrawal-queue-erc721#finalization",children:"finalize withdrawal requests"}),". Allocation of deposits above the target value is prohibited."]}),"\n",(0,t.jsxs)(n.li,{children:["deactivate misbehaving operators by ",(0,t.jsx)(n.code,{children:"deactivateNodeOperator()"}),". A deactivated node operator do not get rewards and new deposits."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"glossary",children:"Glossary"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:'In the context of these terms "signing key", "key", "validator key", "validator" might be used interchangeably.'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"signing key"}),". BLS12-381 public key that will be used by the protocol for making Beacon deposits to ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/gu%C3%ADas/node-operators/validator-keys#generaci%C3%B3n-de-claves-de-firma",children:"run a validator"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"vetted"})," (signing key). Approved by the Lido DAO for receiving ether for deposit."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"submitted"})," (signing key). Added to the node operators registry."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"depositable"})," (signing key). Suitable for new deposits."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"deposited"})," (signing key). Ever received deposit."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"unused"})," (signing key). Submitted but not deposited yet."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"exited"}),' (signing key). A validator that got into "Exited" state: either by ',(0,t.jsx)(n.a,{href:"https://lighthouse-book.sigmaprime.io/voluntary-exit.html",children:"voluntary exit"})," or as a result of slashing. ",(0,t.jsx)(n.a,{href:"https://www.attestant.io/posts/understanding-the-validator-lifecycle/",children:"This doc"})," might be useful regarding the validators lifecycle."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"used (active)"})," (signing key). Deposited but not yet exited."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"stuck"})," (validator). Not exited in proper time after an exit request from ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/validators-exit-bus-oracle",children:(0,t.jsx)(n.code,{children:"ValidatorsExitBusOracle"})})," by Lido protocol."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"refunded"})," (stuck validator). Compensated by the NO for being stuck. For more information on handling of NO misbehavior see ",(0,t.jsx)(n.a,{href:"https://snapshot.org/#/lido-snapshot.eth/proposal/0x3b1e5f9960e682abdc25c86624ad13acb88ee1cea18db9be99379b44750c7b36",children:"Lido on Ethereum Block Proposer Rewards Policy v1.0"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"node-operator-parameters",children:"Node operator parameters"}),"\n",(0,t.jsx)(n.p,{children:"For each NO the contract keeps a record of at least these values:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"active: bool"})," active/inactive status of the NO. An active NO gets rewards and new deposits according to its staking limit. New node operators are added in active state."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name: string"})," human-readable name of the NO"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"rewardAddress: address"})," where to send stETH rewards (part of the protocol fee)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"totalVettedValidators: uint64"})," Max number of validator keys approved for deposit by the DAO so far"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"totalExitedValidators: uint64"})," incremental counter of all exited validators for the NO so far"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"totalAddedValidators: uint64"})," incremental counter of all added to the NO validators so far"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"totalDepositedValidators: uint64"})," incremental counter of all deposited validators for the NO so far"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"targetValidatorsCount: uint256"})," target value for the number of validators for the NO. If the current active number of validators is below the value, the excess ones will be requested to exit. Allocation of deposits above the target value is prohibited. The exiting works only if ",(0,t.jsx)(n.code,{children:"isTargetLimitActive"})," is true. The ",(0,t.jsx)(n.code,{children:"0"})," value will cause exit requests issued for all deposited validators of the NO."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"isTargetLimitActive: bool"})," flag whether NO validators number is target-limited (see ",(0,t.jsx)(n.code,{children:"targetValidatorsCount"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"stuckValidatorsCount: uint256"})," number of stuck keys  delivered by the oracle report"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"refundedValidatorsCount: uint256"})," number of refunded validators"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"depositableValidatorsCount: uint256"})," number of depositable validators"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The values can be viewed by means of ",(0,t.jsx)(n.code,{children:"getNodeOperator()"})," and ",(0,t.jsx)(n.code,{children:"getNodeOperatorSummary()"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Except for the function listed below, the contract has methods accessible only by ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/staking-router",children:(0,t.jsx)(n.code,{children:"StakingRouter"})}),"\n(holder of ",(0,t.jsx)(n.code,{children:"STAKING_ROUTER_ROLE"}),"). These functions are called internally in the course of\n",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/accounting-oracle",children:(0,t.jsx)(n.code,{children:"AccountingOracle"})})," report."]}),"\n",(0,t.jsx)(n.h2,{id:"view-methods",children:"View Methods"}),"\n",(0,t.jsx)(n.h3,{id:"getrewardsdistribution",children:"getRewardsDistribution()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the rewards distribution proportional to the effective stake for each node operator"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getRewardsDistribution(uint256 _totalRewardShares) returns (\n  address[] recipients,\n  uint256[] shares,\n  bool[] penalized\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_totalRewardShares"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Total amount of reward shares to distribute"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"getactivenodeoperatorscount",children:"getActiveNodeOperatorsCount()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the number of active node operators."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getActiveNodeOperatorsCount() returns (uint256)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getnodeoperator",children:"getNodeOperator()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the node operator by id."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNodeOperator(uint256 _nodeOperatorId, bool _fullInfo) returns (\n    bool active,\n    string name,\n    address rewardAddress,\n    uint64 totalVettedValidators,\n    uint64 totalExitedValidators,\n    uint64 totalAddedValidators,\n    uint64 totalDepositedValidators\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_fullInfo"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"If true, name will be returned as well"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"gettotalsigningkeycount",children:"getTotalSigningKeyCount()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the total number of signing keys of the node operator."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getTotalSigningKeyCount(uint256 _nodeOperatorId) returns (uint256)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"getunusedsigningkeycount",children:"getUnusedSigningKeyCount()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the number of usable signing keys of the node operator."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getUnusedSigningKeyCount(uint256 _nodeOperatorId) returns (uint256)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"getsigningkey",children:"getSigningKey()"}),"\n",(0,t.jsx)(n.p,{children:"Returns n-th signing key of the node operator."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getSigningKey(uint256 _nodeOperatorId, uint256 _index) returns (\n    bytes key,\n    bytes depositSignature,\n    bool used\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_index"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Index of the key, starting with 0"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Returns:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"key"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsx)(n.td,{children:"Key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"depositSignature"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsxs)(n.td,{children:["Signature needed for a ",(0,t.jsx)(n.code,{children:"depositContract.deposit"})," call"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"used"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Flag indication if the key was used in the staking"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"getsigningkeys",children:"getSigningKeys()"}),"\n",(0,t.jsxs)(n.p,{children:["Returns subset of the signing keys of the node operator corresponding to the specified range ",(0,t.jsx)(n.code,{children:"[_offset, _offset + _limit)"}),".\nIf the range is out of bound of range ",(0,t.jsx)(n.code,{children:"[0, <total keys number>)"})," reverts with ",(0,t.jsx)(n.code,{children:"OUT_OF_RANGE"})," error."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getSigningKeys(uint256 _nodeOperatorId, uint256 _offset, uint256 _limit) returns (\n    bytes memory pubkeys,\n    bytes memory signatures,\n    bool[] memory used\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_offset"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsxs)(n.td,{children:["Offset of the key in the array of all NO keys (",(0,t.jsx)(n.code,{children:"0"})," means the first key, ",(0,t.jsx)(n.code,{children:"1"})," the second, etc"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_limit"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of keys to return"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Returns:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pubkeys"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsxs)(n.td,{children:["Keys concatenated into the bytes batch: ",(0,t.jsx)(n.code,{children:"[ 48 bytes key | 48 bytes key | ... ]"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"signatures"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsxs)(n.td,{children:["Signatures needed for a ",(0,t.jsx)(n.code,{children:"deposit_contract.deposit"})," call, concatenated as ",(0,t.jsx)(n.code,{children:"[ 96 bytes | 96 bytes | ... ]"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"used"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool[]"})}),(0,t.jsx)(n.td,{children:"Array of flags indicated if the key was used in the staking"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"getnodeoperatorscount",children:"getNodeOperatorsCount()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the total number of node operators."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNodeOperatorsCount() returns (uint256)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getnonce",children:"getNonce()"}),"\n",(0,t.jsx)(n.p,{children:"Returns a counter that increments whenever the deposit data set changes. Namely, it increments every time when for a node operator:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"staking limit changed;"}),"\n",(0,t.jsx)(n.li,{children:"target validators limit changed;"}),"\n",(0,t.jsx)(n.li,{children:"stuck validators count changed;"}),"\n",(0,t.jsx)(n.li,{children:"exited validators count changed;"}),"\n",(0,t.jsx)(n.li,{children:"validator signing keys added/removed;"}),"\n",(0,t.jsx)(n.li,{children:"penalty is cleared;"}),"\n",(0,t.jsxs)(n.li,{children:["ready to deposit keys invalidated (due to withdrawal credentials change or due to manual invalidation by call of ",(0,t.jsx)(n.code,{children:"invalidateReadyToDepositKeysRange"}),");"]}),"\n",(0,t.jsx)(n.li,{children:"ether deposited."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNonce() view returns (uint256)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"gettype",children:"getType()"}),"\n",(0,t.jsx)(n.p,{children:"Returns the type of the staking module."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getType() view returns (bytes32)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getstakingmodulesummary",children:"getStakingModuleSummary()"}),"\n",(0,t.jsx)(n.p,{children:"Returns some statistics of the staking module."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getStakingModuleSummary() view returns (\n    uint256 totalExitedValidators,\n    uint256 totalDepositedValidators,\n    uint256 depositableValidatorsCount\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"totalExitedValidators"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Total number of exited validators"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"totalDepositedValidators"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Total number of deposited validators"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"depositableValidatorsCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of validators which can be deposited"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"getnodeoperatorisactive",children:"getNodeOperatorIsActive()"}),"\n",(0,t.jsx)(n.p,{children:"Returns if the node operator with given id is active."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNodeOperatorIsActive(uint256 _nodeOperatorId) view returns (bool)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"getnodeoperatorids",children:"getNodeOperatorIds()"}),"\n",(0,t.jsxs)(n.p,{children:["Returns up to ",(0,t.jsx)(n.code,{children:"_limit"})," node operator ids starting from the ",(0,t.jsx)(n.code,{children:"_offset"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNodeOperatorIds(uint256 _offset, uint256 _limit) view\n    returns (uint256[] memory nodeOperatorIds)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_offset"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Offset of the first element of the range"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_limit"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Max number of NO ids to return"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"getnodeoperatorsummary",children:"getNodeOperatorSummary()"}),"\n",(0,t.jsx)(n.p,{children:"Returns some statistics of the node operator."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getNodeOperatorSummary(uint256 _nodeOperatorId) view returns (\n    bool isTargetLimitActive,\n    uint256 targetValidatorsCount,\n    uint256 stuckValidatorsCount,\n    uint256 refundedValidatorsCount,\n    uint256 stuckPenaltyEndTimestamp,\n    uint256 totalExitedValidators,\n    uint256 totalDepositedValidators,\n    uint256 depositableValidatorsCount\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"isTargetLimitActive"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Is limiting target active validators count for NO enabled"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"targetValidatorsCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsxs)(n.td,{children:["Target validators count for full description see ",(0,t.jsx)(n.a,{href:"#node-operator-parameters",children:"parameters section"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stuckValidatorsCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of stuck keys from oracle report"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"refundedValidatorsCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of refunded keys"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stuckPenaltyEndTimestamp"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Extra penalty time after stuck keys refunded"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"totalExitedValidators"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of keys in the EXITED state of the NO for all time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"totalDepositedValidators"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of keys of the NO which were in DEPOSITED state for all time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"depositableValidatorsCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of validators which can be deposited"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"getstuckpenaltydelay",children:"getStuckPenaltyDelay()"}),"\n",(0,t.jsx)(n.p,{children:"Returns value of the stuck penalty delay (in seconds).\nThis parameter defines how long a penalized NO stays in penalty state after the stuck keys were refunded."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getStuckPenaltyDelay() view returns (uint256)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"isoperatorpenalized",children:"isOperatorPenalized()"}),"\n",(0,t.jsx)(n.p,{children:"Returns flag whether the NO is penalized."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function isOperatorPenalized(uint256 _nodeOperatorId) view returns (bool)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"isoperatorpenaltycleared",children:"isOperatorPenaltyCleared()"}),"\n",(0,t.jsx)(n.p,{children:"Returns flag whether the NO penalty is cleared."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function isOperatorPenalized(uint256 _nodeOperatorId) view returns (bool)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getlocator",children:"getLocator()"}),"\n",(0,t.jsxs)(n.p,{children:["Returns the address of ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/contracts/lido-locator",children:(0,t.jsx)(n.code,{children:"LidoLocator"})}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function getLocator() view returns (ILidoLocator)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"addnodeoperator",children:"addNodeOperator()"}),"\n",(0,t.jsxs)(n.p,{children:["Add node operator named ",(0,t.jsx)(n.code,{children:"_name"})," with reward address ",(0,t.jsx)(n.code,{children:"_rewardAddress"})," and staking limit = 0."]}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function addNodeOperator(\n  string _name,\n  address _rewardAddress\n) returns (uint256 id)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_name"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Human-readable name"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rewardAddress"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})}),(0,t.jsx)(n.td,{children:"Address which receives stETH rewards for this operator"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Returns:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"id"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"A unique key of the added operator"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"activatenodeoperator",children:"activateNodeOperator()"}),"\n",(0,t.jsx)(n.p,{children:"Activates deactivated node operator with given id."}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Increases the validators keys nonce"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function activateNodeOperator(uint256 _nodeOperatorId)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"deactivatenodeoperator",children:"deactivateNodeOperator()"}),"\n",(0,t.jsx)(n.p,{children:"Deactivates active node operator with given id."}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Increases the validators keys nonce"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function deactivateNodeOperator(uint256 _nodeOperatorId)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"setnodeoperatorname",children:"setNodeOperatorName()"}),"\n",(0,t.jsx)(n.p,{children:"Change human-readable name of the node operator with given id."}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function setNodeOperatorName(uint256 _nodeOperatorId, string _name)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_name"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Human-readable name"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"setnodeoperatorrewardaddress",children:"setNodeOperatorRewardAddress()"}),"\n",(0,t.jsx)(n.p,{children:"Change reward address of the node operator with given id."}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function setNodeOperatorRewardAddress(uint256 _nodeOperatorId, address _rewardAddress)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rewardAddress"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})}),(0,t.jsx)(n.td,{children:"New reward address"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"setnodeoperatorstakinglimit",children:"setNodeOperatorStakingLimit()"}),"\n",(0,t.jsx)(n.p,{children:"Set the maximum number of validators to stake for the node operator with given id."}),"\n",(0,t.jsxs)(n.p,{children:["Executed on behalf of holder of ",(0,t.jsx)(n.code,{children:"SET_NODE_OPERATOR_LIMIT_ROLE"})," role."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Current implementation preserves invariant:\n",(0,t.jsx)(n.code,{children:"depositedSigningKeysCount <= vettedSigningKeysCount <= totalSigningKeysCount"}),".\nIf ",(0,t.jsx)(n.code,{children:"_vettedSigningKeysCount"})," out of range ",(0,t.jsx)(n.code,{children:"[depositedSigningKeysCount, totalSigningKeysCount]"}),",\nthe new vettedSigningKeysCount value will be set to the nearest range border."]})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Increases the validators keys nonce"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function setNodeOperatorStakingLimit(uint256 _nodeOperatorId, uint64 _vettedSigningKeysCount)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id to set staking limit for"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_vettedSigningKeysCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})}),(0,t.jsx)(n.td,{children:"New staking limit of the node operator"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"addsigningkeys",children:"addSigningKeys()"}),"\n",(0,t.jsxs)(n.p,{children:["Add ",(0,t.jsx)(n.code,{children:"_keysCount"})," validator signing keys to the keys of the node operator ",(0,t.jsx)(n.code,{children:"_nodeOperatorId"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Can be executed for the given NO if called from the NO's reward address or by the holder of ",(0,t.jsx)(n.code,{children:"MANAGE_SIGNING_KEYS"})," role."]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.p,{children:["Along with each key ",(0,t.jsx)(n.code,{children:"pubkey"})," a signatures must be provided for the\n",(0,t.jsx)(n.code,{children:"(pubkey, withdrawal_credentials, 32000000000)"})," message. For the details see the ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/gu%C3%ADas/node-operators/validator-keys#generaci%C3%B3n-de-claves-de-firma",children:"keys section in NO guide"}),"."]}),(0,t.jsx)(n.p,{children:"Given that information, the contract'll be able to call deposit_contract.deposit on-chain."})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Increases the validators keys nonce"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function addSigningKeys(\n  uint256 _nodeOperatorId,\n  uint256 _keysCount,\n  bytes _publicKeys,\n  bytes _signatures\n)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_keysCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of signing keys provided"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_publicKeys"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsx)(n.td,{children:"Several concatenated validator signing public keys"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_signatures"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsxs)(n.td,{children:["Several concatenated signatures for the DepositContract messages see the ",(0,t.jsx)(n.a,{href:"/lido-docs-spanish/gu%C3%ADas/node-operators/validator-keys#generaci%C3%B3n-de-claves-de-firma",children:"keys section in NO guide"})]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"removesigningkeys",children:"removeSigningKeys()"}),"\n",(0,t.jsxs)(n.p,{children:["Removes an ",(0,t.jsx)(n.code,{children:"_keysCount"})," of validator signing keys starting from ",(0,t.jsx)(n.code,{children:"_fromIndex"})," of operator ",(0,t.jsx)(n.code,{children:"_nodeOperatorId"})," usable keys."]}),"\n",(0,t.jsxs)(n.p,{children:["Can be executed for the given NO if called from the NO's reward address or by the holder of ",(0,t.jsx)(n.code,{children:"MANAGE_SIGNING_KEYS"})," role."]}),"\n",(0,t.jsx)(n.p,{children:"Keys removing from the last index to the highest one, so we won't get outside the array."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Increases the validators keys nonce"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function removeSigningKeys(uint256 _nodeOperatorId, uint256 _fromIndex, uint256 _keysCount)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Node operator id"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_fromIndex"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Index of the key, starting with 0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_keysCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Number of keys to remove"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"invalidatereadytodepositkeysrange",children:"invalidateReadyToDepositKeysRange()"}),"\n",(0,t.jsxs)(n.p,{children:["Invalidates all unused validators keys for node operators in the given range.\nExecuted on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function invalidateReadyToDepositKeysRange(uint256 _indexFrom, uint256 _indexTo)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_indexFrom"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"the first index (inclusive) of the NO to invalidate keys for"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_indexTo"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"The last index (inclusive) of the NO to invalidate keys for"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"clearnodeoperatorpenalty",children:"clearNodeOperatorPenalty()"}),"\n",(0,t.jsx)(n.p,{children:"Clears penalty state for the NO if it is suitable for clearing.\nThe penalty state is switched automatically upon oracle report if the conditions are met\n(e.g., if penalty delay expired), but this function allows it to happen quicker.\nCan be called by anyone."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function clearNodeOperatorPenalty(uint256 _nodeOperatorId) external returns (bool)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_nodeOperatorId"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Id of the NO"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"setstuckpenaltydelay",children:"setStuckPenaltyDelay()"}),"\n",(0,t.jsx)(n.p,{children:"Sets the stuck penalty delay parameter."}),"\n",(0,t.jsxs)(n.p,{children:["Add node operator named ",(0,t.jsx)(n.code,{children:"_name"})," with reward address ",(0,t.jsx)(n.code,{children:"_rewardAddress"})," and staking limit = 0.\nExecuted on behalf of holder of ",(0,t.jsx)(n.code,{children:"MANAGE_NODE_OPERATOR_ROLE"})," role."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sol",children:"function setStuckPenaltyDelay(uint256 _delay)\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_delay"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint256"})}),(0,t.jsx)(n.td,{children:"Stuck penalty delay in seconds"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,d)=>{d.d(n,{R:()=>i,x:()=>o});var t=d(6540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);