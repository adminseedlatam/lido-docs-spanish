"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7511],{4202:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var t=i(4848),n=i(8453);const o={},r="Flow Examples",l={id:"guides/node-operators/exits/flow-examples",title:"Flow Examples",description:"With Lido Tooling (KAPI + Ejector)",source:"@site/docs/guides/node-operators/exits/flow-examples.md",sourceDirName:"guides/node-operators/exits",slug:"/guides/node-operators/exits/flow-examples",permalink:"/lido-docs-spanish/guides/node-operators/exits/flow-examples",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/guides/node-operators/exits/flow-examples.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Exit Message Generation & Signing",permalink:"/lido-docs-spanish/guides/node-operators/exits/exit-message-generation-signing"},next:{title:"Tooling Setup & Configuration",permalink:"/lido-docs-spanish/guides/node-operators/exits/tooling-setup"}},d={},a=[{value:"With Lido Tooling (KAPI + Ejector)",id:"with-lido-tooling-kapi--ejector",level:2},{value:"Ejector Only",id:"ejector-only",level:2},{value:"Without Lido Tooling",id:"without-lido-tooling",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"flow-examples",children:"Flow Examples"}),"\n",(0,t.jsx)(s.h2,{id:"with-lido-tooling-kapi--ejector",children:"With Lido Tooling (KAPI + Ejector)"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://hackmd.io/_uploads/Hkl5aS7x2.jpg",children:(0,t.jsx)(s.img,{src:"https://hackmd.io/_uploads/Hkl5aS7x2.jpg",alt:""})})}),"\n",(0,t.jsx)(s.p,{children:"Using the recommended tooling, the flow looks like this:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Get a list of validators for which to generate and sign exit messages - KAPI"}),"\n",(0,t.jsx)(s.li,{children:"Generate and sign exit messages:"}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"keystores - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"dirk - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"web3signer or a proprietary signer - custom script/tooling"}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:"Encrypt the message files using the Ejector encryptor script"}),"\n",(0,t.jsx)(s.li,{children:"Add files to the Ejector"}),"\n",(0,t.jsx)(s.li,{children:"Wait until valid Ejector messages are running out"}),"\n",(0,t.jsx)(s.li,{children:"Repeat"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"ejector-only",children:"Ejector Only"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://hackmd.io/_uploads/H1_Z4Creh.jpg",children:(0,t.jsx)(s.img,{src:"https://hackmd.io/_uploads/H1_Z4Creh.jpg",alt:""})})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Get a list of validators for which to generate and sign exit messages:"}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"By the order keys are stored in (eg choose oldest)"}),"\n",(0,t.jsxs)(s.li,{children:["Query ",(0,t.jsx)(s.a,{href:"https://github.com/lidofinance/lido-dao/blob/feature/shapella-upgrade/contracts/0.4.24/nos/NodeOperatorsRegistry.sol",children:"NodeOperatorsRegistry"})," contract to get all your keys, sort by index, start with the lowest indexes. Each batch, either track the last pre-signed index or query validator status on the Consensus Node to ignore exiting and already exited validators."]}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsx)(s.li,{children:"Generate and sign exit messages:"}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"keystores - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"dirk - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"web3signer or a proprietary signer - custom script/tooling"}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:"Encrypt the message files using the Ejector encryptor script"}),"\n",(0,t.jsx)(s.li,{children:"Add files to the Ejector"}),"\n",(0,t.jsx)(s.li,{children:"Wait until valid Ejector messages are running out"}),"\n",(0,t.jsx)(s.li,{children:"Repeat"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"without-lido-tooling",children:"Without Lido Tooling"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://hackmd.io/_uploads/rJZ5TBme3.jpg",children:(0,t.jsx)(s.img,{src:"https://hackmd.io/_uploads/rJZ5TBme3.jpg",alt:""})})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Monitor ",(0,t.jsx)(s.code,{children:"ValidatorExitRequest"})," events of the ",(0,t.jsx)(s.a,{href:"https://github.com/lidofinance/lido-dao/blob/feature/shapella-upgrade/contracts/0.8.9/oracle/ValidatorsExitBusOracle.sol",children:(0,t.jsx)(s.code,{children:"ValidatorsExitBusOracle"})})]}),"\n",(0,t.jsx)(s.li,{children:"Generate and sign exit messages:"}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"keystores - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"dirk - ethdo"}),"\n",(0,t.jsx)(s.li,{children:"web3signer or a proprietary signer - custom script/tooling"}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:"Submit the messages:"}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["ethdo can do it straight away in the previous step by leaving out ",(0,t.jsx)(s.code,{children:"--json"})," argument"]}),"\n",(0,t.jsxs)(s.li,{children:["Submit it manually to the Consensus Node: ",(0,t.jsx)(s.a,{href:"https://ethereum.github.io/beacon-APIs/#/Beacon/submitPoolVoluntaryExit",children:"API Docs"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>r,x:()=>l});var t=i(6540);const n={},o=t.createContext(n);function r(e){const s=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);