"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3882],{698:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var o=n(4848),s=n(8453);const t={},l="GateSeal",r={id:"contracts/gate-seal",title:"GateSeal",description:"- C\xf3digo fuente",source:"@site/docs/contracts/gate-seal.md",sourceDirName:"contracts",slug:"/contracts/gate-seal",permalink:"/contracts/gate-seal",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/contracts/gate-seal.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"TRP VestingEscrow",permalink:"/contracts/trp-vesting-escrow"},next:{title:"InsuranceFund",permalink:"/contracts/insurance"}},i={},c=[{value:"\xbfQu\xe9 es un GateSeal?",id:"qu\xe9-es-un-gateseal",level:2},{value:"\xbfPor qu\xe9 usar un GateSeal?",id:"por-qu\xe9-usar-un-gateseal",level:2},{value:"\xbfC\xf3mo funciona?",id:"c\xf3mo-funciona",level:2},{value:"\xbfC\xf3mo se crean los GateSeals?",id:"c\xf3mo-se-crean-los-gateseals",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.h1,{id:"gateseal",children:"GateSeal"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.a,{href:"https://github.com/lidofinance/gate-seals/blob/main/contracts/GateSeal.vy",children:"C\xf3digo fuente"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.a,{href:"https://github.com/lidofinance/gate-seals/blob/main/contracts/GateSealFactory.vy",children:"C\xf3digo fuente de la f\xe1brica"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.a,{href:"https://etherscan.io/address/0x1ad5cb2955940f998081c1ef5f5f00875431aa90",children:"Contrato desplegado"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.a,{href:"https://etherscan.io/address/0x6c82877cac5a7a739f16ca0a89c0a328b8764a24",children:"Contrato de f\xe1brica desplegado"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.a,{href:"https://etherscan.io/address/0xEe06EA501f7d9DC6F4200385A8D910182D155d3e",children:"Contrato de blueprint desplegado"})}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Un bot\xf3n de p\xe1nico de un solo uso para contratos pausables."}),"\n",(0,o.jsx)(a.h2,{id:"qu\xe9-es-un-gateseal",children:"\xbfQu\xe9 es un GateSeal?"}),"\n",(0,o.jsx)(a.p,{children:"Un GateSeal es un contrato que permite a una cuenta designada poner instant\xe1neamente en pausa (es decir, sellar) un conjunto de contratos por un tiempo limitado. Los GateSeals est\xe1n dise\xf1ados para ser utilizados como un bot\xf3n de p\xe1nico para contratos cruciales en caso de emergencia. Cada GateSeal es de un solo uso y se vuelve inutilizable de inmediato una vez activado. Si el sellado nunca se activa, el GateSeal eventualmente expirar\xe1 despu\xe9s de un periodo establecido."}),"\n",(0,o.jsx)(a.h2,{id:"por-qu\xe9-usar-un-gateseal",children:"\xbfPor qu\xe9 usar un GateSeal?"}),"\n",(0,o.jsxs)(a.p,{children:["Para poner en pausa componentes tan cruciales del protocolo Lido como ",(0,o.jsx)(a.code,{children:"WithdrawalQueue"})," y ",(0,o.jsx)(a.code,{children:"ValidatorsExitBusOracle"}),", el DAO debe llevar a cabo una votaci\xf3n que puede tardar varios d\xedas en aprobarse. Los GateSeals proporcionan una forma de pausar temporalmente estos contratos de inmediato si la emergencia requiere una respuesta m\xe1s r\xe1pida. Esto dar\xe1 al DAO de Lido el tiempo necesario para encontrar una soluci\xf3n, llevar a cabo una votaci\xf3n, implementar cambios, etc."]}),"\n",(0,o.jsx)(a.p,{children:"Cada GateSeal es operado por un comit\xe9, esencialmente una cuenta multisig responsable de activar el sellado en caso de problemas. Sin embargo, autorizar a un comit\xe9 para pausar/reanudar los retiros del protocolo ser\xeda completamente imprudente, raz\xf3n por la cual los GateSeals tienen varias protecciones implementadas:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"cada GateSeal solo puede ser activado una vez y se vuelve inutilizable inmediatamente despu\xe9s,"}),"\n",(0,o.jsx)(a.li,{children:"cada GateSeal solo puede ser activado dentro de su periodo de validez m\xe1ximo de 1 a\xf1o y se vuelve inutilizable despu\xe9s de su marca de tiempo de caducidad incluso si nunca se activ\xf3,"}),"\n",(0,o.jsx)(a.li,{children:"la duraci\xf3n de la pausa establecida en el momento de la construcci\xf3n est\xe1 limitada a 14 d\xedas."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Por lo tanto, el mayor da\xf1o que un multisig de GateSeal comprometido puede infligir es pausar los retiros durante 14 d\xedas, siempre y cuando el DAO no reanude los retiros antes a trav\xe9s de una votaci\xf3n de gobernanza."}),"\n",(0,o.jsx)(a.p,{children:'A pesar de todo esto, sigue siendo indeseable que un protocolo descentralizado dependa de un multisig en cualquier capacidad, raz\xf3n por la cual los GateSeals son solo una soluci\xf3n temporal; su dise\xf1o de uso \xfanico y vida \xfatil limitada act\xfaa tambi\xe9n como una especie de "bomba de inconveniencia", ya que una vez expirado, el GateSeal debe ser reemplazado y configurado nuevamente.'}),"\n",(0,o.jsx)(a.h2,{id:"c\xf3mo-funciona",children:"\xbfC\xf3mo funciona?"}),"\n",(0,o.jsxs)(a.p,{children:["La idea de los GateSeals se basa en gran medida en los contratos ",(0,o.jsx)(a.code,{children:"PausableUntil"}),", que implementan tanto ",(0,o.jsx)(a.code,{children:"WithdrawalQueue"})," como ",(0,o.jsx)(a.code,{children:"ValidatorsExitBusOracle"}),". Estos contratos ",(0,o.jsx)(a.code,{children:"PausableUntil"})," son similares a los contratos ",(0,o.jsx)(a.code,{children:"Pausable"})," con una diferencia importante: el estado pausado no es simplemente un valor booleano, sino un timestamp desde el cual el contrato se reanuda (o se despausa). Esto permite al usuario pausar el contrato por un per\xedodo determinado, tras el cual el contrato se reanudar\xe1 sin una llamada expl\xedcita. As\xed, el patr\xf3n PausableUntil en conjunto con un GateSeal proporciona una forma de detener el protocolo en una situaci\xf3n cr\xedtica."]}),"\n",(0,o.jsx)(a.p,{children:"Un GateSeal se configura con una configuraci\xf3n inmutable en el momento de la construcci\xf3n:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"el comit\xe9 de sellado, una cuenta responsable de activar el sellado,"}),"\n",(0,o.jsx)(a.li,{children:"la duraci\xf3n del sellado, un per\xedodo durante el cual los contratos estar\xe1n sellados,"}),"\n",(0,o.jsx)(a.li,{children:"los contratos a sellar,"}),"\n",(0,o.jsx)(a.li,{children:"el per\xedodo de expiraci\xf3n, un per\xedodo despu\xe9s del cual el GateSeal se vuelve inutilizable."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Es importante destacar que los GateSeals no evitan las configuraciones de control de acceso para contratos pausables, raz\xf3n por la cual los GateSeals deben recibir los permisos apropiados de antemano. Cuando surge una emergencia, el comit\xe9 de sellado simplemente llama a la funci\xf3n de sellado y pone los contratos en pausa durante la duraci\xf3n establecida."}),"\n",(0,o.jsx)(a.h2,{id:"c\xf3mo-se-crean-los-gateseals",children:"\xbfC\xf3mo se crean los GateSeals?"}),"\n",(0,o.jsxs)(a.p,{children:["Los GateSeals se crean utilizando el ",(0,o.jsx)(a.a,{href:"https://github.com/lidofinance/gate-seals/blob/main/contracts/GateSealFactory.vy",children:"GateSealFactory"}),". La f\xe1brica utiliza el patr\xf3n de blueprint mediante el cual se despliegan nuevos GateSeals utilizando el initcode (blueprint) almacenado en la cadena. El blueprint es esencialmente un GateSeal defectuoso que solo se puede usar para crear nuevos GateSeals."]}),"\n",(0,o.jsxs)(a.p,{children:["Aunque Vyper ofrece otras formas de crear nuevos contratos, optamos por usar el patr\xf3n blueprint porque crea un contrato completamente aut\xf3nomo sin dependencias. A diferencia de otras funciones que crean contratos, ",(0,o.jsx)(a.a,{href:"https://docs.vyperlang.org/en/stable/built-in-functions.html#chain-interaction",children:(0,o.jsx)(a.code,{children:"create_from_blueprint"})})," invoca el constructor del contrato, lo que ayuda a evitar problemas de inicializaci\xf3n."]}),"\n",(0,o.jsxs)(a.p,{children:["El blueprint sigue el formato ",(0,o.jsx)(a.a,{href:"https://eips.ethereum.org/EIPS/eip-5202",children:"EIP-5202"}),", que incluye un encabezado que hace que el contrato no sea invocable y especifica la versi\xf3n."]})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>l,x:()=>r});var o=n(6540);const s={},t=o.createContext(s);function l(e){const a=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(t.Provider,{value:a},e.children)}}}]);