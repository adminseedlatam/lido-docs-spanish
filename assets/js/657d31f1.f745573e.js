"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8498],{1827:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>t});var s=n(4848),d=n(8453);const c={},o="Burner",a={id:"contracts/burner",title:"Burner",description:"- C\xf3digo Fuente",source:"@site/docs/contracts/burner.md",sourceDirName:"contracts",slug:"/contracts/burner",permalink:"/contracts/burner",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/contracts/burner.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"M\xf3dulo de Seguridad de Dep\xf3sitos (DepositSecurityModule)",permalink:"/contracts/deposit-security-module"},next:{title:"LidoExecutionLayerRewardsVault",permalink:"/contracts/lido-execution-layer-rewards-vault"}},i={},t=[{value:"Contadores de acciones quemadas",id:"contadores-de-acciones-quemadas",level:2},{value:"M\xe9todos de Vista",id:"m\xe9todos-de-vista",level:2},{value:"getCoverSharesBurnt()",id:"getcoversharesburnt",level:3},{value:"getNonCoverSharesBurnt()",id:"getnoncoversharesburnt",level:3},{value:"getExcessStETH()",id:"getexcesssteth",level:3},{value:"getSharesRequestedToBurn()",id:"getsharesrequestedtoburn",level:3},{value:"M\xe9todos",id:"m\xe9todos",level:2},{value:"requestBurnMyStETHForCover()",id:"requestburnmystethforcover",level:3},{value:"Par\xe1metros",id:"par\xe1metros",level:4},{value:"requestBurnSharesForCover()",id:"requestburnsharesforcover",level:3},{value:"Par\xe1metros",id:"par\xe1metros-1",level:4},{value:"requestBurnMyStETH()",id:"requestburnmysteth",level:3},{value:"Par\xe1metros",id:"par\xe1metros-2",level:4},{value:"requestBurnShares()",id:"requestburnshares",level:3},{value:"Par\xe1metros",id:"par\xe1metros-3",level:4},{value:"recoverExcessStETH()",id:"recoverexcesssteth",level:3},{value:"recoverERC20()",id:"recovererc20",level:3},{value:"Par\xe1metros",id:"par\xe1metros-4",level:4},{value:"recoverERC721()",id:"recovererc721",level:3},{value:"Par\xe1metros",id:"par\xe1metros-5",level:4},{value:"commitSharesToBurn()",id:"commitsharestoburn",level:3},{value:"Par\xe1metros",id:"par\xe1metros-6",level:4},{value:"requestBurnShares()",id:"requestburnshares-1",level:3},{value:"Parameters",id:"parameters",level:4},{value:"recoverExcessStETH()",id:"recoverexcesssteth-1",level:3},{value:"recoverERC20()",id:"recovererc20-1",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"recoverERC721()",id:"recovererc721-1",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"commitSharesToBurn()",id:"commitsharestoburn-1",level:3},{value:"Parameters",id:"parameters-3",level:4}];function l(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"burner",children:"Burner"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/lidofinance/lido-dao/blob/master/contracts/0.8.9/Burner.sol",children:"C\xf3digo Fuente"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://etherscan.io/address/0xD15a672319Cf0352560eE76d9e89eAB0889046D3",children:"Contrato Desplegado"})}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"El contrato proporciona una forma para el protocolo Lido de quemar acciones de tokens stETH como un medio para finalizar retiros, penalizar a los operadores de nodos que salen fuera de tiempo y, posiblemente, cubrir p\xe9rdidas en el staking."}),"\n",(0,s.jsxs)(r.p,{children:["Depende de la naturaleza de rebasamiento (rebasing) de stETH. El contrato ",(0,s.jsx)(r.code,{children:"Lido"})," calcula el saldo del usuario utilizando la siguiente ecuaci\xf3n:\n",(0,s.jsx)(r.code,{children:"balanceOf(cuenta) = shares[cuenta] * totalPooledEther / totalShares"}),".\nPor lo tanto, quemar acciones (por ejemplo, disminuir la cantidad de ",(0,s.jsx)(r.code,{children:"totalShares"}),") aumenta los saldos de los poseedores de stETH."]}),"\n",(0,s.jsxs)(r.p,{children:["Se presume que la quema real de acciones ocurre dentro del contrato ",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," como parte del informe del ",(0,s.jsx)(r.a,{href:"/contracts/accounting-oracle",children:(0,s.jsx)(r.code,{children:"AccountingOracle"})}),"."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Burner"})," proporciona una manera segura y determin\xedstica de incurrir en un rebasamiento positivo del token stETH disminuyendo gradualmente ",(0,s.jsx)(r.code,{children:"totalShares"}),", lo cual puede ser manejado correctamente por protocolos de terceros integrados con stETH."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Burner"})," acepta solicitudes de quema de dos maneras:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Bloqueando stETH ",(0,s.jsx)(r.strong,{children:"preaprobado de alguien"})," por el llamador con el rol asignado ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["Bloqueando stETH ",(0,s.jsx)(r.strong,{children:"provisto por el llamador"})," con el rol asignado ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_MY_STETH_ROLE"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Estas solicitudes de quema se establecen inicialmente en un estado pendiente. La quema real ocurre como parte de un informe del or\xe1culo (",(0,s.jsx)(r.a,{href:"/contracts/accounting-oracle",children:(0,s.jsx)(r.code,{children:"AccountingOracle"})}),") manejado por ",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," para prevenir fluctuaciones adicionales en el per\xedodo de rebasamiento del token stETH (~24h)."]}),"\n",(0,s.jsx)(r.p,{children:"Tambi\xe9n distinguimos dos tipos de solicitudes de quema de acciones:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["solicitud para ",(0,s.jsx)(r.strong,{children:"cubrir"})," un evento de reducci\xf3n (por ejemplo, disminuci\xf3n del monto total de ETH agrupado entre dos informes de or\xe1culo consecutivos);"]}),"\n",(0,s.jsxs)(r.li,{children:["solicitud para quemar acciones para cualquier otro caso (",(0,s.jsx)(r.strong,{children:"no cubrir"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["El contrato tiene dos contadores separados para las acciones quemadas: uno para las que cubren (",(0,s.jsx)(r.code,{children:"cover"}),") y otro para las que no cubren (",(0,s.jsx)(r.code,{children:"non-cover"}),"). El contrato es exclusivamente responsable de la quema de acciones de stETH por parte de ",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," y solo permite la quema desde el propio saldo del contrato."]}),"\n",(0,s.jsx)(r.h2,{id:"contadores-de-acciones-quemadas",children:"Contadores de acciones quemadas"}),"\n",(0,s.jsxs)(r.p,{children:["El contrato lleva un registro de todas las acciones quemadas manteniendo dos contadores internos: ",(0,s.jsx)(r.code,{children:"totalCoverSharesBurnt"})," y ",(0,s.jsx)(r.code,{children:"totalNonCoverSharesBurnt"})," para las quemas de cobertura y no cobertura, respectivamente. Estos contadores se incrementan cuando se realiza la quema real de stETH como parte del informe del Or\xe1culo de Lido."]}),"\n",(0,s.jsx)(r.p,{children:"Esto permite dividir cualquier rebasamiento de stETH en dos subcomponentes: el rebasamiento inducido por recompensas y el rebasamiento inducido por la aplicaci\xf3n de cobertura, que se puede hacer de la siguiente manera:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Antes del rebasamiento, guardar los valores anteriores de ambos contadores, as\xed como el valor del precio de la acci\xf3n stETH:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"prevCoverSharesBurnt = Burner.totalCoverSharesBurnt()\nprevSharePrice = stETH.totalSupply() / stETH.getTotalShares()\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Despu\xe9s del rebasamiento, realizar los siguientes c\xe1lculos:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"sharesBurntFromOldToNew = Burner.totalCoverSharesBurnt() - prevCoverSharesBurnt;\nnewSharePriceAfterCov = stETH.totalSupply() / (stETH.getTotalShares() + sharesBurntFromOldToNew);\nnewSharePrice = stETH.totalSupply() / stETH.getTotalShares();\n\n// incremento del precio de la acci\xf3n inducido por recompensas\nrewardPerShare = newSharePriceAfterCov - prevSharePrice;\n\n// incremento del precio de la acci\xf3n inducido por la cobertura\nnonRewardSharePriceIncrease = newSharePrice - prevSharePrice - rewardPerShare;\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"m\xe9todos-de-vista",children:"M\xe9todos de Vista"}),"\n",(0,s.jsx)(r.h3,{id:"getcoversharesburnt",children:"getCoverSharesBurnt()"}),"\n",(0,s.jsx)(r.p,{children:"Devuelve el total de acciones de cobertura quemadas hasta el momento."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function getCoverSharesBurnt() external view returns (uint256)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getnoncoversharesburnt",children:"getNonCoverSharesBurnt()"}),"\n",(0,s.jsx)(r.p,{children:"Devuelve el total de acciones no cubiertas quemadas hasta el momento."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function getNonCoverSharesBurnt() external view returns (uint256)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getexcesssteth",children:"getExcessStETH()"}),"\n",(0,s.jsx)(r.p,{children:"Devuelve la cantidad de stETH perteneciente a la direcci\xf3n del contrato quemador pero que no est\xe1 marcada para quemar."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function getExcessStETH() external view returns (uint256)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getsharesrequestedtoburn",children:"getSharesRequestedToBurn()"}),"\n",(0,s.jsx)(r.p,{children:"Devuelve el n\xfamero de acciones de cobertura y no cobertura solicitadas para quemar."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function getSharesRequestedToBurn() external view returns (uint256 coverShares, uint256 nonCoverShares)\n"})}),"\n",(0,s.jsx)(r.h2,{id:"m\xe9todos",children:"M\xe9todos"}),"\n",(0,s.jsx)(r.h3,{id:"requestburnmystethforcover",children:"requestBurnMyStETHForCover()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere tokens stETH desde el remitente del mensaje y los bloquea de manera irreversible en la direcci\xf3n del contrato quemador. Internamente convierte la cantidad de tokens en la cantidad subyacente de acciones y marca la cantidad convertida para la quema respaldada por cobertura mediante el aumento del contador interno ",(0,s.jsx)(r.code,{children:"coverSharesBurnRequested"}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function requestBurnMyStETHForCover(uint256 _stETHAmountToBurn) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["El remitente del mensaje no es titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_MY_STETH_ROLE"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["No se proporciona stETH (",(0,s.jsx)(r.code,{children:"_stETHAmountToBurn == 0"}),")."]}),"\n",(0,s.jsx)(r.li,{children:"No se transfieren stETH (se excede la asignaci\xf3n)."}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_stETHAmountToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"cantidad de tokens stETH (no cantidad de acciones) a quemar"})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"requestburnsharesforcover",children:"requestBurnSharesForCover()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere acciones stETH desde ",(0,s.jsx)(r.code,{children:"_from"})," y las bloquea de manera irreversible en la direcci\xf3n del contrato quemador. Internamente marca la cantidad de acciones para la quema respaldada por cobertura mediante el aumento del contador interno ",(0,s.jsx)(r.code,{children:"coverSharesBurnRequested"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Solo puede ser llamado por un titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"}),". Despu\xe9s de la actualizaci\xf3n a Lido V2, no es llamado realmente por ning\xfan contrato y se supone que es llamado por el Agente de Lido DAO en caso de necesidad de cobertura."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function requestBurnSharesForCover(address _from, uint256 _sharesAmountToBurn)\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["El remitente del mensaje no es titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["No se proporcionan acciones stETH (",(0,s.jsx)(r.code,{children:"_sharesAmountToBurn == 0"}),")."]}),"\n",(0,s.jsx)(r.li,{children:"No se transfieren acciones stETH (se excede la asignaci\xf3n)."}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-1",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_from"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"direcci\xf3n desde la cual transferir las acciones"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_sharesAmountToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"cantidad de acciones (no cantidad de tokens stETH) a quemar"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"requestburnmysteth",children:"requestBurnMyStETH()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere tokens stETH desde el remitente del mensaje y los bloquea de manera irreversible en la direcci\xf3n del contrato quemador. Internamente convierte la cantidad de tokens en la cantidad subyacente de acciones y marca la cantidad convertida para la quema no respaldada por cobertura mediante el aumento del contador interno ",(0,s.jsx)(r.code,{children:"nonCoverSharesBurnRequested"}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function requestBurnMyStETH(uint256 _stETHAmountToBurn) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["El remitente del mensaje no es titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_MY_STETH_ROLE"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["No se proporciona stETH (",(0,s.jsx)(r.code,{children:"_stETHAmountToBurn == 0"}),")."]}),"\n",(0,s.jsx)(r.li,{children:"No se transfieren stETH (se excede la asignaci\xf3n)."}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-2",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_stETHAmountToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"cantidad de tokens stETH (no cantidad de acciones) a quemar."})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"requestburnshares",children:"requestBurnShares()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere acciones stETH desde ",(0,s.jsx)(r.code,{children:"_from"})," y las bloquea de manera irreversible en la direcci\xf3n del contrato quemador. Internamente marca la cantidad de acciones para la quema no respaldada por cobertura mediante el aumento del contador interno ",(0,s.jsx)(r.code,{children:"nonCoverSharesBurnRequested"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Solo puede ser llamado por un titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"}),", que despu\xe9s de la actualizaci\xf3n a Lido V2 es ",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," o ",(0,s.jsx)(r.a,{href:"/contracts/node-operators-registry",children:(0,s.jsx)(r.code,{children:"NodeOperatorsRegistry"})}),".\n",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," necesita esto para solicitar acciones bloqueadas en la cola de retiros ",(0,s.jsx)(r.a,{href:"/contracts/withdrawal-queue-erc721",children:(0,s.jsx)(r.code,{children:"WithdrawalQueueERC721"})})," y\n",(0,s.jsx)(r.a,{href:"/contracts/node-operators-registry",children:(0,s.jsx)(r.code,{children:"NodeOperatorsRegistry"})})," lo necesita para solicitar la quema de acciones para penalizar las recompensas de operadores de nodos que se comportan incorrectamente."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function requestBurnShares(address _from, uint256 _sharesAmountToBurn)\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["El remitente del mensaje no es titular del rol ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["No se proporcionan acciones stETH (",(0,s.jsx)(r.code,{children:"_sharesAmountToBurn == 0"}),")."]}),"\n",(0,s.jsx)(r.li,{children:"No se transfieren acciones stETH (se excede la asignaci\xf3n)."}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-3",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_from"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"direcci\xf3n desde la cual transferir las acciones"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_sharesAmountToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"cantidad de acciones (no cantidad de tokens stETH) a quemar"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"recoverexcesssteth",children:"recoverExcessStETH()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere la cantidad excedente de stETH (por ejemplo, perteneciente a la direcci\xf3n del contrato quemador pero no marcada para quemar) a la direcci\xf3n del tesoro de Lido (el contrato ",(0,s.jsx)(r.code,{children:"DAO Agent"}),") configurado durante la construcci\xf3n del contrato."]}),"\n",(0,s.jsxs)(r.p,{children:["No hace nada si la funci\xf3n de vista ",(0,s.jsx)(r.code,{children:"getExcessStETH"})," devuelve 0 (cero), es decir, no hay exceso de stETH en el balance del contrato."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverExcessStETH() external\n"})}),"\n",(0,s.jsx)(r.h3,{id:"recovererc20",children:"recoverERC20()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere una cantidad dada de un token ERC20 (definido por la direcci\xf3n del contrato proporcionada) perteneciente a la direcci\xf3n del contrato quemador a la direcci\xf3n del tesoro de Lido (el contrato ",(0,s.jsx)(r.code,{children:"DAO Agent"}),")."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverERC20(address _token, uint256 _amount) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["El valor ",(0,s.jsx)(r.code,{children:"_amount"})," es 0 (cero)."]}),"\n",(0,s.jsxs)(r.li,{children:["La direcci\xf3n ",(0,s.jsx)(r.code,{children:"_token"})," es 0 (cero)."]}),"\n",(0,s.jsxs)(r.li,{children:["La direcci\xf3n ",(0,s.jsx)(r.code,{children:"_token"})," es igual a la direcci\xf3n de ",(0,s.jsx)(r.code,{children:"stETH"})," (usar ",(0,s.jsx)(r.code,{children:"recoverExcessStETH"})," en su lugar)."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-4",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_token"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"direcci\xf3n del token ERC20 para recuperar"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_amount"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"Cantidad a recuperar"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"recovererc721",children:"recoverERC721()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfiere un NFT compatible con ERC721 dado (definido por la direcci\xf3n del contrato proporcionada) perteneciente a la direcci\xf3n del contrato quemador a la direcci\xf3n del tesoro de Lido (el ",(0,s.jsx)(r.code,{children:"DAO Agent"}),")."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverERC721(address _token, uint256 _tokenId) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["La direcci\xf3n ",(0,s.jsx)(r.code,{children:"_token"})," es 0 (cero)."]}),"\n",(0,s.jsxs)(r.li,{children:["La direcci\xf3n ",(0,s.jsx)(r.code,{children:"_token"})," es igual a la direcci\xf3n de ",(0,s.jsx)(r.code,{children:"stETH"})," (usar ",(0,s.jsx)(r.code,{children:"recoverExcessStETH"})," en su lugar)."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-5",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_token"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"direcci\xf3n del token compatible con ERC721 para recuperar"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_tokenId"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"ID del token a recuperar"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"commitsharestoburn",children:"commitSharesToBurn()"}),"\n",(0,s.jsxs)(r.p,{children:["Marca las acciones previamente solicitadas para quemar, tanto las de cobertura como las no de cobertura, como quemadas.\nEmite el evento ",(0,s.jsx)(r.code,{children:"StETHBurnt"})," para las acciones de cobertura y no de cobertura marcadas como quemadas."]}),"\n",(0,s.jsxs)(r.p,{children:["Esta funci\xf3n es llamada por el contrato ",(0,s.jsx)(r.code,{children:"Lido"})," junto con (es decir, en la misma transacci\xf3n) la realizaci\xf3n real de la quema de acciones."]}),"\n",(0,s.jsxs)(r.p,{children:["Si ",(0,s.jsx)(r.code,{children:"_sharesToBurn"})," es 0, no hace nada."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function commitSharesToBurn(uint256 _sharesToBurn) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Revoca si alguna de las siguientes condiciones es verdadera:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["La direcci\xf3n del ",(0,s.jsx)(r.code,{children:"msg.sender"})," NO es igual a la direcci\xf3n de ",(0,s.jsx)(r.code,{children:"stETH"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_sharesToBurn"})," es mayor que las acciones solicitadas para quemar de cobertura m\xe1s no de cobertura."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-6",children:"Par\xe1metros"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_sharesToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"Cantidad de acciones de cobertura m\xe1s no de cobertura para marcar como quemadas"})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"requestburnshares-1",children:"requestBurnShares()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfers stETH shares from ",(0,s.jsx)(r.code,{children:"_from"})," and irreversibly locks these on the burner contract address.\nInternally marks the shares amount for non-cover backed burning by increasing the internal ",(0,s.jsx)(r.code,{children:"nonCoverSharesBurnRequested"})," counter."]}),"\n",(0,s.jsxs)(r.p,{children:["Can be called only by a holder of the ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"})," role which after\nLido V2 upgrade is either ",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," or ",(0,s.jsx)(r.a,{href:"/contracts/node-operators-registry",children:(0,s.jsx)(r.code,{children:"NodeOperatorsRegistry"})}),".\n",(0,s.jsx)(r.a,{href:"/contracts/lido",children:(0,s.jsx)(r.code,{children:"Lido"})})," needs this to request shares locked on the ",(0,s.jsx)(r.a,{href:"/contracts/withdrawal-queue-erc721",children:(0,s.jsx)(r.code,{children:"WithdrawalQueueERC721"})})," and\n",(0,s.jsx)(r.a,{href:"/contracts/node-operators-registry",children:(0,s.jsx)(r.code,{children:"NodeOperatorsRegistry"})})," needs it to request burning shares to penalize the rewards of misbehaving node operators."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function requestBurnShares(address _from, uint256 _sharesAmountToBurn)\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Reverts if any of the following is true:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"msg.sender"})," is not a holder of ",(0,s.jsx)(r.code,{children:"REQUEST_BURN_SHARES_ROLE"})," role;"]}),"\n",(0,s.jsxs)(r.li,{children:["no stETH shares provided (",(0,s.jsx)(r.code,{children:"_sharesAmountToBurn == 0"}),");"]}),"\n",(0,s.jsx)(r.li,{children:"no stETH shares transferred (allowance exceeded)."}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_from"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"address to transfer shares from"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_sharesAmountToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"shares amount (not stETH tokens amount) to burn"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"recoverexcesssteth-1",children:"recoverExcessStETH()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfers the excess stETH amount (e.g. belonging to the burner contract address but not marked for burning)\nto the Lido treasury address (the ",(0,s.jsx)(r.code,{children:"DAO Agent"})," contract) set upon the contract construction."]}),"\n",(0,s.jsxs)(r.p,{children:["Does nothing if the ",(0,s.jsx)(r.code,{children:"getExcessStETH"})," view func returns 0 (zero), i.e. there is no excess stETH\non the contract's balance."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverExcessStETH() external\n"})}),"\n",(0,s.jsx)(r.h3,{id:"recovererc20-1",children:"recoverERC20()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfers a given amount of an ERC20-token (defined by the provided contract address) belonging\nto the burner contract address to the Lido treasury (the ",(0,s.jsx)(r.code,{children:"DAO Agent"})," contract) address."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverERC20(address _token, uint256 _amount) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Reverts if any of the following is true:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_amount"})," value is 0 (zero);"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_token"})," address is 0 (zero);"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_token"})," address equals to the ",(0,s.jsx)(r.code,{children:"stETH"})," address (use ",(0,s.jsx)(r.code,{children:"recoverExcessStETH"})," instead)."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_token"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"ERC20-compatible token address to recover"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_amount"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"Amount to recover"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"recovererc721-1",children:"recoverERC721()"}),"\n",(0,s.jsxs)(r.p,{children:["Transfers a given ERC721-compatible NFT (defined by the contract address) belonging\nto the burner contract address to the Lido treasury (the ",(0,s.jsx)(r.code,{children:"DAO Agent"}),") address."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function recoverERC721(address _token, uint256 _tokenId) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Reverts if any of the following is true:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_token"})," address is 0 (zero);"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_token"})," address equals to the ",(0,s.jsx)(r.code,{children:"stETH"})," address (use ",(0,s.jsx)(r.code,{children:"recoverExcessStETH"})," instead)."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_token"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"address"})}),(0,s.jsx)(r.td,{children:"ERC721-compatible token address to recover"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_tokenId"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"Token id to recover"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"commitsharestoburn-1",children:"commitSharesToBurn()"}),"\n",(0,s.jsxs)(r.p,{children:["Marks previously requested to burn cover and non-cover share as burnt.\nEmits ",(0,s.jsx)(r.code,{children:"StETHBurnt"})," event for the cover and non-cover shares marked as burnt."]}),"\n",(0,s.jsxs)(r.p,{children:["This function is called by the ",(0,s.jsx)(r.code,{children:"Lido"})," contract together with (i.e., the same tx) performing the actual shares burning."]}),"\n",(0,s.jsxs)(r.p,{children:["If ",(0,s.jsx)(r.code,{children:"_sharesToBurn"})," is 0 does nothing."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sol",children:"function commitSharesToBurn(uint256 _sharesToBurn) external\n"})}),"\n",(0,s.jsxs)(r.admonition,{type:"note",children:[(0,s.jsx)(r.p,{children:"Reverts if any of the following is true:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"msg.sender"})," address is NOT equal to the ",(0,s.jsx)(r.code,{children:"stETH"})," address;"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_sharesToBurn"})," is greater than the cover plus non-cover shares requested to burn."]}),"\n"]})]}),"\n",(0,s.jsx)(r.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Name"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"_sharesToBurn"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uint256"})}),(0,s.jsx)(r.td,{children:"Amount of cover plus non-cover shares to mark as burnt"})]})})]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>a});var s=n(6540);const d={},c=s.createContext(d);function o(e){const r=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:o(e.components),s.createElement(c.Provider,{value:r},e.children)}}}]);