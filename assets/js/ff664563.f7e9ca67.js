"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9463],{3377:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>c,frontMatter:()=>n,metadata:()=>l,toc:()=>d});var i=s(4848),a=s(8453);const n={},r="API",l={id:"integrations/api",title:"API",description:"Lido APIs are strictly for read-only access",source:"@site/docs/integrations/api.md",sourceDirName:"integrations",slug:"/integrations/api",permalink:"/lido-docs-spanish/integrations/api",draft:!1,unlisted:!1,editUrl:"https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/integrations/api.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Lido V2 mainnet parameters",permalink:"/lido-docs-spanish/gu\xedas/verify-lido-v2-upgrade-manual"},next:{title:"Wallets",permalink:"/lido-docs-spanish/integrations/wallets"}},o={},d=[{value:"Lido APR",id:"lido-apr",level:2},{value:"Simple Moving Average Lido APR for 7 last days:",id:"simple-moving-average-lido-apr-for-7-last-days",level:3},{value:"Holesky",id:"holesky",level:3},{value:"Last Lido APR for stETH",id:"last-lido-apr-for-steth",level:3},{value:"Holesky",id:"holesky-1",level:4},{value:"Lido Reward History",id:"lido-reward-history",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Holesky",id:"holesky-2",level:3},{value:"Withdrawals API",id:"withdrawals-api",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculates time to withdrawals requests:",id:"calculates-time-to-withdrawals-requests",level:3},{value:"Calculate time to withdrawal current queue:",id:"calculate-time-to-withdrawal-current-queue",level:3},{value:"Calculates time to withdrawal amount of stETH:",id:"calculates-time-to-withdrawal-amount-of-steth",level:3},{value:"Holesky",id:"holesky-3",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"api",children:"API"}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsx)(t.p,{children:"Lido APIs are strictly for read-only access"})}),"\n",(0,i.jsx)(t.p,{children:"Here you can find various Lido APIs which you can integrate in your app or website:"}),"\n",(0,i.jsx)(t.h2,{id:"lido-apr",children:"Lido APR"}),"\n",(0,i.jsx)(t.p,{children:"API provides Ethereum and Lido staking APR, which include:"}),"\n",(0,i.jsx)(t.h3,{id:"simple-moving-average-lido-apr-for-7-last-days",children:"Simple Moving Average Lido APR for 7 last days:"}),"\n",(0,i.jsx)(t.p,{children:"This APR value is based on Simple Moving Average of APR values over a period of 7 days."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://eth-api.lido.fi/v1/protocol/steth/apr/sma\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://eth-api.lido.fi/api/#/APR%20for%20Eth%20and%20stEth/ProtocolController_findSmaAPRforSTETH",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h3,{id:"holesky",children:"Holesky"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://eth-api-holesky.testnet.fi/v1/protocol/steth/apr/sma\n"})}),"\n",(0,i.jsx)(t.h3,{id:"last-lido-apr-for-steth",children:"Last Lido APR for stETH"}),"\n",(0,i.jsxs)(t.p,{children:["The latest staking APR value. For Lido V1, we collected APR values by periodically fetching ",(0,i.jsx)(t.a,{href:"/lido-docs-spanish/contracts/legacy-oracle#posttotalshares",children:"oracle report events"}),". For the V2 version, the value is calculated based on ",(0,i.jsx)(t.a,{href:"https://github.com/lidofinance/lido-dao/blob/e45c4d6/contracts/0.4.24/Lido.sol#L232",children:"rebase events"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"V2 APR calculation:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"// Emits when token rebased (total supply and/or total shares were changed)\nevent TokenRebased(\n    uint256 indexed reportTimestamp,\n    uint256 timeElapsed,\n    uint256 preTotalShares,\n    uint256 preTotalEther, /* preTotalPooledEther */\n    uint256 postTotalShares,\n    uint256 postTotalEther, /* postTotalPooledEther */\n    uint256 sharesMintedAsFees /* fee part included in `postTotalShares` */\n);\n\npreShareRate = preTotalEther * 1e27 / preTotalShares\npostShareRate = postTotalEther * 1e27 / postTotalShares\n\nuserAPR =\n    secondsInYear * (\n        (postShareRate - preShareRate) / preShareRate\n    ) / timeElapsed\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://eth-api.lido.fi/v1/protocol/steth/apr/last\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://eth-api.lido.fi/api/static/index.html#/APR%20for%20Eth%20and%20stEth/ProtocolController_findLastAPRforSTETH",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h4,{id:"holesky-1",children:"Holesky"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://eth-api-holesky.testnet.fi/v1/protocol/steth/apr/last\n"})}),"\n",(0,i.jsx)(t.h2,{id:"lido-reward-history",children:"Lido Reward History"}),"\n",(0,i.jsx)(t.p,{children:"Reward History Backend provides an API which returns all stETH interactions by an address and calculates its daily stETH rewards."}),"\n",(0,i.jsxs)(t.p,{children:["Currently, there's just one endpoint (",(0,i.jsx)(t.code,{children:"/"}),"):"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://reward-history-backend.lido.fi/?address=0x12345\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://reward-history-backend.lido.fi/api",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.p,{children:["The only required query parameter is ",(0,i.jsx)(t.code,{children:"address"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Optional Parameters:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"currency"}),": USD/EUR/GBP - Fiat currency in which to display stETH denominated in fiat. ",(0,i.jsx)(t.strong,{children:"USD"})," by default."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"archiveRate"}),": true/false - Use an exchange rate close to the transaction time when calculating currency values instead of the current one. ",(0,i.jsx)(t.strong,{children:"true"})," by default."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"onlyRewards"}),": true/false - Include only rewards without transfers or stakings. ",(0,i.jsx)(t.strong,{children:"false"})," by default."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"sort"}),": asc/desc - Sort of transactions by blockTime. ",(0,i.jsx)(t.strong,{children:"desc"})," by default."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"skip"}),": number - Amount of data items to skip."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"limit"}),": number - Maximum amount of data items to respond with."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"skip"})," and ",(0,i.jsx)(t.code,{children:"limit"})," params are used for pagination eg:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"skip: 0, limit: 100 = 1 page\nskip: 100, limit: 100 = 2 page\nskip: 200, limit: 100 = 3 page\n"})}),"\n",(0,i.jsx)(t.h3,{id:"holesky-2",children:"Holesky"}),"\n",(0,i.jsx)(t.p,{children:"Reward History Backend is also available on Hole\u0161ky:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"http://reward-history-backend-holesky.testnet.fi/?address=0x12345\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://reward-history-backend-holesky.testnet.fi/api",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h2,{id:"withdrawals-api",children:"Withdrawals API"}),"\n",(0,i.jsxs)(t.p,{children:["The Withdrawals API service offers an utility for estimating the waiting time for ",(0,i.jsx)(t.a,{href:"https://docs.lido.fi/contracts/withdrawal-queue-erc721",children:"withdrawals"})," within the Lido on Ethereum protocol.\nThe service is helpful for stakers, providing insights from the moment of withdrawal request placement to its finalization when the request becomes claimable."]}),"\n",(0,i.jsxs)(t.p,{children:["See the ",(0,i.jsx)(t.a,{href:"https://github.com/lidofinance/withdrawals-api/blob/develop/how-estimation-works.md",children:"detailed explanation"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Estimation before request: users can estimate the waiting time before placing a withdrawal request."}),"\n",(0,i.jsx)(t.li,{children:"Tracking the existing request: users can track the estimated waiting time for the already placed request."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"calculates-time-to-withdrawals-requests",children:"Calculates time to withdrawals requests:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://wq-api.lido.fi/v2/request-time?ids=1&ids=2\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://wq-api.lido.fi/api#/Request%20Time/RequestTimeController_requestsTime",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h3,{id:"calculate-time-to-withdrawal-current-queue",children:"Calculate time to withdrawal current queue:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://wq-api.lido.fi/v2/request-time/calculate\n"})}),"\n",(0,i.jsx)(t.h3,{id:"calculates-time-to-withdrawal-amount-of-steth",children:"Calculates time to withdrawal amount of stETH:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://wq-api.lido.fi/v2/request-time/calculate?amount=32\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://wq-api.lido.fi/api#/Request%20Time/RequestTimeController_calculateTime",children:"Swagger API documentation"})]}),"\n",(0,i.jsx)(t.h3,{id:"holesky-3",children:"Holesky"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://wq-api-holesky.testnet.fi/v2/request-time?ids=1&ids=2\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Response schema and examples are available in the ",(0,i.jsx)(t.a,{href:"https://wq-api-holesky.testnet.fi/api#/Request%20Time/RequestTimeController_requestsTime",children:"Swagger API documentation"})]})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>l});var i=s(6540);const a={},n=i.createContext(a);function r(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);