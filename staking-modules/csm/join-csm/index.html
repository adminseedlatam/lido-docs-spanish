<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-staking-modules/csm/join-csm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Join CSM | Lido Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://adminseedlatam.github.io/lido-docs-spanish/staking-modules/csm/join-csm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Join CSM | Lido Docs"><meta data-rh="true" name="description" content="join-csm-1"><meta data-rh="true" property="og:description" content="join-csm-1"><link data-rh="true" rel="canonical" href="https://adminseedlatam.github.io/lido-docs-spanish/staking-modules/csm/join-csm"><link data-rh="true" rel="alternate" href="https://adminseedlatam.github.io/lido-docs-spanish/staking-modules/csm/join-csm" hreflang="en"><link data-rh="true" rel="alternate" href="https://adminseedlatam.github.io/lido-docs-spanish/staking-modules/csm/join-csm" hreflang="x-default"><link rel="stylesheet" href="/lido-docs-spanish/assets/css/styles.4b5e42a6.css">
<script src="/lido-docs-spanish/assets/js/runtime~main.2d507343.js" defer="defer"></script>
<script src="/lido-docs-spanish/assets/js/main.e0d0063e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lido-docs-spanish/"><div class="navbar__logo"><img src="/lido-docs-spanish/img/logo.svg" alt="Lido Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/lido-docs-spanish/img/logo.svg" alt="Lido Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Lido Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/adminseedlatam/lido-docs-spanish" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lido-docs-spanish/">Introducción</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lido-docs-spanish/lido-dao">Lido DAO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lido-docs-spanish/guías/lido-tokens-integration-guide">Guía de integración de tokens de Lido</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/guías/node-operators/general-overview">Guías</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/integrations/api">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/guías-token/steth-superuser-functions">Guías Token</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/contracts/lido-locator">Contracts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/security/bugbounty">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lido-docs-spanish/deployed-contracts/">Deployed contracts</a><button aria-label="Expand sidebar category &#x27;Deployed contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/multisigs/emergency-brakes">Multisigs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lido-docs-spanish/ipfs/about">IPFS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/lido-docs-spanish/staking-modules/csm/intro">Staking Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/intro">CSM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/intro">Introducción</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/join-csm">Join CSM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/rewards">Rewards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/penalties">Penalties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/validator-exits">Validator Exits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lido-docs-spanish/staking-modules/csm/further-reading">Further reading</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/lido-docs-spanish/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Staking Modules</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">CSM</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Join CSM</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Join CSM</h1>
<p><img decoding="async" loading="lazy" alt="join-csm-1" src="/lido-docs-spanish/assets/images/join-csm-1-0d4160028c3b5a5ab570a5057990f45e.png" width="2753" height="1979" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-operator-creation">Node Operator creation<a class="hash-link" aria-label="Direct link to Node Operator creation" title="Direct link to Node Operator creation" href="/lido-docs-spanish/staking-modules/csm/join-csm#node-operator-creation">​</a></h2>
<p>To become a Node Operator in CSM or register new validators for an existing Node Operator, at least one <code>validator pubkey</code>, corresponding <a href="https://github.com/ethereum/consensus-specs/blob/v1.4.0/specs/phase0/beacon-chain.md#signingdata" target="_blank" rel="noopener noreferrer"><code>deposit signature</code></a>, and the corresponding bond amount should be provided.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-data-preparation-and-upload">Deposit data preparation and upload<a class="hash-link" aria-label="Direct link to Deposit data preparation and upload" title="Direct link to Deposit data preparation and upload" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-preparation-and-upload">​</a></h2>
<p>CSM accepts deposit data in the same <a href="/lido-docs-spanish/contracts/node-operators-registry#addsigningkeys">format</a> (<code>validator pubkey</code> + <code>deposit signature</code>) as the <a href="/lido-docs-spanish/contracts/node-operators-registry">Curated module</a>, with the main difference being a requirement to submit the bond prior to or alongside deposit data upload.</p>
<p><a href="https://github.com/ethereum/consensus-specs/blob/v1.4.0/specs/phase0/beacon-chain.md#signingdata" target="_blank" rel="noopener noreferrer"><code>deposit signature</code></a> <strong>must</strong> sign the root of the <code>(deposit_message, domain)</code>. Where a <code>domain</code> is used to identify the chain, and <code>deposit_message</code> has the form of the following tuple:</p>
<ul>
<li><code>validator pubkey</code>;</li>
<li><code>withdrawal_credentials</code> with actual <a href="/lido-docs-spanish/contracts/withdrawal-vault"><code>Lido Withdrawal Vault contract</code></a> address. Should be retrieved from <a href="/lido-docs-spanish/contracts/staking-router#getwithdrawalcredentials">Staring Router</a>;</li>
<li><code>32 ETH amount</code>;</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bond">Bond<a class="hash-link" aria-label="Direct link to Bond" title="Direct link to Bond" href="/lido-docs-spanish/staking-modules/csm/join-csm#bond">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Here and after, the term &#x27;bond&#x27; has the following meaning:</p><p><strong>Bond</strong> - a security collateral that Node Operators must submit before uploading validator keys into CSM. This collateral covers possible losses caused by inappropriate actions on the Node Operator&#x27;s side. Once the validator exits from the Beacon chain and all losses that occurred are covered, the collateral can be claimed or reused to upload new validator keys.</p></div></div>
<p>A bond is a property of a Node Operator, not a validator. Bond is stored in the form of stETH. Node Operators can submit bond tokens in ETH, stETH, and wstETH. Provided ETH is staked, and wstETH is unwrapped during submission to ensure stETH is the only form of a bond.</p>
<p>The total amount of the bond required depends on the total number of Node Operator&#x27;s validators and has the form of a curve (see  <a href="https://github.com/lidofinance/community-staking-module/blob/main/src/abstract/CSBondCurve.sol#L92" target="_blank" rel="noopener noreferrer"><code>getBondAmountByKeysCount(keysCount)</code></a>)</p>
<p><img decoding="async" loading="lazy" alt="join-csm-2" src="/lido-docs-spanish/assets/images/join-csm-2-d5e059fd3dc0441b5aa1c53c4d7aaab6.png" width="2226" height="1314" class="img_ev3q"></p>
<p>The graph above can be redrawn for the reader&#x27;s convenience concerning the validator number, not total validators.</p>
<p><img decoding="async" loading="lazy" alt="join-csm-3" src="/lido-docs-spanish/assets/images/join-csm-3-9b11f664a1de1a98685b297aff004399.png" width="2170" height="996" class="img_ev3q"></p>
<p>There might be several bond curves (<code>getBondAmountByKeysCount</code> function implementations). A default curve is assigned to all Node Operators upon creation. A custom curve can be set for the Node Operator later.</p>
<p>Existing Node Operators can top-up bond without uploading deposit data to compensate for the penalties or to have bond funds uploaded upfront.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unbonded-validators">Unbonded validators<a class="hash-link" aria-label="Direct link to Unbonded validators" title="Direct link to Unbonded validators" href="/lido-docs-spanish/staking-modules/csm/join-csm#unbonded-validators">​</a></h3>
<p>The term &quot;unbonded&quot; is introduced to refer to the validators for which the bond does not fully cover this validator. Taking into account the approach when the bond is common for all Node Operator&#x27;s validators, unbonded validators can be determined in a way illustrated below. In the example, validator N+1 is unbonded.</p>
<p><img decoding="async" loading="lazy" alt="join-csm-4" src="/lido-docs-spanish/assets/images/join-csm-4-e16e693d85f61db74fc411e20b02749b.png" width="2716" height="528" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possible-negative-steth-rebase-consequences">Possible negative stETH rebase consequences<a class="hash-link" aria-label="Direct link to Possible negative stETH rebase consequences" title="Direct link to Possible negative stETH rebase consequences" href="/lido-docs-spanish/staking-modules/csm/join-csm#possible-negative-steth-rebase-consequences">​</a></h3>
<p>With the bond being stored in stETH, there is a risk of a reduction in the bond amount due to a negative stETH rebase. This might result in some Node Operators being unable to claim rewards (due to the actual bond being lower than required) or even validators becoming unbonded. This problem is described in detail in <a href="https://hackmd.io/@lido/BJqWx7P0p" target="_blank" rel="noopener noreferrer">Bond Mechanics in Lido ADR</a>. For this document, it is worth mentioning that no additional actions are required for CSM due to the low probability of the negative stETH rebase and a dedicated <a href="/lido-docs-spanish/contracts/insurance">insurance fund</a> at the Lido DAO&#x27;s disposal for possible use as cover.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-data-validation-and-invalidation-aka-vetting-and-unvetting">Deposit data validation and invalidation (aka vetting and unvetting)<a class="hash-link" aria-label="Direct link to Deposit data validation and invalidation (aka vetting and unvetting)" title="Direct link to Deposit data validation and invalidation (aka vetting and unvetting)" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-validation-and-invalidation-aka-vetting-and-unvetting">​</a></h2>
<p>Given the upcoming <a href="https://hackmd.io/@lido/rJrTnEc2a" target="_blank" rel="noopener noreferrer">DSM</a> upgrade, CSM will utilize an <a href="https://hackmd.io/@lido/ryw2Qo5ia" target="_blank" rel="noopener noreferrer">optimistic vetting</a> approach. Uploaded deposit data will be treated as valid unless DSM reports it is not. In case of invalid deposit data detection, DSM calls <a href="https://github.com/lidofinance/community-staking-module/blob/main/src/CSModule.sol#L861" target="_blank" rel="noopener noreferrer"><code>decreaseVettedSigningKeysCount</code></a> to set <code>vettedKeys</code> pointer to the deposit data prior to the first invalid deposit data. In this case a Node Operator should remove invalid keys to resume stake allocation to the valid non-deposited keys.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="depositable-keys">Depositable keys<a class="hash-link" aria-label="Direct link to Depositable keys" title="Direct link to Depositable keys" href="/lido-docs-spanish/staking-modules/csm/join-csm#depositable-keys">​</a></h2>
<p>Several factors determine if the deposit can be made using corresponding deposit data. This information is reflected in the Node Operator&#x27;s <code>depositableKeys</code> property. This property indicates the number of deposit data records extracted sequentially starting from the last deposited record available in the Node Operator&#x27;s key storage for deposits by the staking router. This number is determined as follows:</p>
<ul>
<li><code>targetLimit</code> is not set -&gt; <code>vettedKeys - depositedKeys - unbondedKeys</code></li>
<li><code>targetLimit</code> is set -&gt; <code>min(vettedKeys,targetLimit) - depositedKeys - unbondedKeys</code></li>
<li>Node Operator has <code>stuckKeys != 0</code> no matter the <code>targetLimit</code> -&gt; <code>0</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stake-allocation-queue">Stake allocation queue<a class="hash-link" aria-label="Direct link to Stake allocation queue" title="Direct link to Stake allocation queue" href="/lido-docs-spanish/staking-modules/csm/join-csm#stake-allocation-queue">​</a></h2>
<p>The stake allocation queue in CSM is a traditional <a href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)" target="_blank" rel="noopener noreferrer">FIFO</a> (first in, first out) queue. Node Operators occupy places in the queue with the <code>{noId, keysCount}</code> batches and wait for their turn.</p>
<p><img decoding="async" loading="lazy" alt="join-csm-5" src="/lido-docs-spanish/assets/images/join-csm-5-518cf6c776afc349ccaf75fcfcf8d868.png" width="2616" height="1385" class="img_ev3q"></p>
<p>Once the queue reaches the Node Operator&#x27;s batch, CSM checks how many keys from the batch can be deposited using the formula: <code>min(depositableKeys, keysInBatch)</code>.</p>
<p><img decoding="async" loading="lazy" alt="join-csm-6" src="/lido-docs-spanish/assets/images/join-csm-6-3e7a41f56bbe2a5b6616a659db553616.png" width="2058" height="1025" class="img_ev3q"></p>
<p>There might be a case when a Node Operator has keys that are not in the queue since they were skipped during the queue iteration as they were not depositable at the moment of iteration. The <code>normalizeQueue</code> method allows Node Operators to place all depositable keys back into the queue.</p>
<p>There are several pointers regarding deposit data storage in CSM. Among the others, there are <code>totalAddedKeys</code> and <code>totalVettedKeys</code> pointers. With the optimistic vetting approach, these two pointers should be in sync most of the time (<code>totalAddedKeys == totalVettedKeys</code>), given that there are no reports about the presence of invalid deposit data. Hence, there are two ways for the deposit data to be placed into the queue:</p>
<ul>
<li>Once the deposit data is uploaded, if <code>totalAddedKeys == totalVettedKeys</code>;</li>
<li>After the call of the <a href="https://github.com/lidofinance/community-staking-module/blob/main/src/CSModule.sol#L978" target="_blank" rel="noopener noreferrer"><code>normalizeQueue</code></a> method, in case some keys were not placed into the queue upon upload (<code>totalAddedKeys != totalVettedKeys</code> at the moment of upload) or were skipped during the queue iterations;</li>
</ul>
<p>There is a method to check the next <code>X</code>elements and remove those containing no depositable keys. This methods is required to ensure queue operation even in catastrophic scenarios resulting in significant queue &quot;pollution&quot; with the non-depositable keys.</p>
<p>A detailed description of the queue is provided in a separate <a href="https://hackmd.io/@lido/ryw2Qo5ia" target="_blank" rel="noopener noreferrer">document</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-data-deletion">Deposit data deletion<a class="hash-link" aria-label="Direct link to Deposit data deletion" title="Direct link to Deposit data deletion" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-deletion">​</a></h2>
<p>The Node Operator might delete uploaded deposit data voluntarily if it has not been deposited yet. The <code>removalCharge</code> is confiscated from the Node Operator&#x27;s bond on each deleted key to cover maximal possible operational costs associated with the queue processing. Deposit data can be deleted in continuous batches (ex., from index 5 to 10).</p>
<p>If the protocol has already deposited the validator related to the deposit data, the Node Operator cannot delete the deposit data. The only way to stop validation duties is to exit the validator on the CL. Once the validator is fully withdrawn, the Node Operator can claim the excess bond.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="early-adoption-period">Early Adoption period<a class="hash-link" aria-label="Direct link to Early Adoption period" title="Direct link to Early Adoption period" href="/lido-docs-spanish/staking-modules/csm/join-csm#early-adoption-period">​</a></h2>
<p>One of the challenges with permissionless entry for the Node Operators with appealing conditions is the possibility of a huge actor occupying all seats in the staking module. To overcome this, an Early Adoption period is proposed as the first stage of the CSM mainnet lifecycle. A Merkle proof used as an entry ticket to the CSM on the mainnet is required to join during the Early Adoption period. On top of the ability to join, such node operators will be eligible for the &quot;bond discount for the first validator&quot;. This will ensure that during the Early Adoption period, <a href="https://github.com/lidofinance/community-staking-module/tree/main/artifacts/holesky/early-adoption" target="_blank" rel="noopener noreferrer">proven solo-stakers</a> will be able to join with a small benefit.</p>
<p>Please refer to the <a href="https://hackmd.io/@lido/HyKgaBMj6" target="_blank" rel="noopener noreferrer">detailed doc</a> to learn more about the mechanics of the Early Adoption period.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further reading<a class="hash-link" aria-label="Direct link to Further reading" title="Direct link to Further reading" href="/lido-docs-spanish/staking-modules/csm/join-csm#further-reading">​</a></h2>
<ul>
<li><a href="/lido-docs-spanish/staking-modules/csm/rewards">Rewards</a></li>
<li><a href="/lido-docs-spanish/staking-modules/csm/penalties">Penalties</a></li>
<li><a href="/lido-docs-spanish/staking-modules/csm/validator-exits">Validator exits</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/adminseedlatam/lido-docs-spanish/edit/main/docs/staking-modules/csm/join-csm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/lido-docs-spanish/staking-modules/csm/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introducción</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/lido-docs-spanish/staking-modules/csm/rewards"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rewards</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#node-operator-creation">Node Operator creation</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-preparation-and-upload">Deposit data preparation and upload</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#bond">Bond</a><ul><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#unbonded-validators">Unbonded validators</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#possible-negative-steth-rebase-consequences">Possible negative stETH rebase consequences</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-validation-and-invalidation-aka-vetting-and-unvetting">Deposit data validation and invalidation (aka vetting and unvetting)</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#depositable-keys">Depositable keys</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#stake-allocation-queue">Stake allocation queue</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#deposit-data-deletion">Deposit data deletion</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#early-adoption-period">Early Adoption period</a></li><li><a class="table-of-contents__link toc-highlight" href="/lido-docs-spanish/staking-modules/csm/join-csm#further-reading">Further reading</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>